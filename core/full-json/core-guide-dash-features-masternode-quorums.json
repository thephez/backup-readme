{
 "metadata": {
  "image": [],
  "title": "Dash Masternode Quorum",
  "description": "Dash's masternode quorums are used to facilitate the operation of masternode provided features in a decentralized, deterministic way.",
  "keywords": "",
  "robots": "index"
 },
 "api": {
  "method": "get",
  "url": "",
  "auth": "required",
  "results": {
   "codes": [
    {
     "status": 200,
     "language": "json",
     "code": "{}",
     "name": ""
    },
    {
     "status": 400,
     "language": "json",
     "code": "{}",
     "name": ""
    }
   ]
  },
  "params": []
 },
 "next": {
  "description": "",
  "pages": [
   {
    "type": "doc",
    "icon": "file-text-o",
    "name": "Proof of Service",
    "slug": "core-guide-dash-features-proof-of-service",
    "category": "Core Guides"
   }
  ]
 },
 "algolia": {
  "recordCount": 5,
  "publishPending": false,
  "translationFailure": false,
  "updatedAt": "2023-03-09T17:17:19.695Z"
 },
 "title": "Masternode Quorums",
 "icon": "",
 "updates": [],
 "type": "basic",
 "slug": "core-guide-dash-features-masternode-quorums",
 "excerpt": "",
 "body": "Dash's <<glossary:masternode>> quorums are used to facilitate the operation of masternode provided features in a decentralized, deterministic way. The original quorums (used largely for <<glossary:InstantSend>> and masternode payments) were ephemeral and used for a single purpose (e.g. voting on one specific InstantSend transaction).\n\nDash Core 0.14 (protocol version 70214) introduced the <<glossary:Long-Living Masternode Quorum>>  (LLMQ) system described in detail by [DIP6](https://github.com/dashpay/dips/blob/master/dip-0006.md). These LLMQs are deterministic subsets of the global deterministic masternode list that are formed via a distributed key generation (DKG) protocol and remain active for a long periods of time (e.g. hours to days).\n\nThe main task of LLMQs is to perform threshold signing of consensus-related messages (e.g. <<glossary:ChainLocks>>).\n\n# LLMQ Creation (DKG)\n\nThe following table details the data flow of P2P messages exchanged during the distributed key generation (DKG) protocol used to establish an LLMQ.\n\n> \ud83d\udcd8 Intra-Quorum Communication\n>\n> Note: With the exception of the final step (`qfcommit` message broadcast), the message exchanges happen only between masternodes participating in the DKG process via the [Intra-Quorum communication process](https://github.com/dashpay/dips/blob/master/dip-0006.md#intra-quorum-communication) described in the DIP.\n\n*Quorum DKG Data Flow*\n\n> \ud83d\udea7 Minimum Masternode Protocol Version\n>\n> As of Dash Core 0.16.0, masternodes perform a [version check](https://github.com/dashpay/dash/pull/3390) on their quorum peers during DKG. Masternodes that do not meet the `MIN_MASTERNODE_PROTO_VERSION` (70227 in Dash Core 19.0) will begin receiving increases in [PoSe](core-guide-dash-features-proof-of-service) score once 60% of the masternodes on the network have upgraded to that version.\n\n| **Masternode** | **Direction**  | **Peers**   | **Description** |\n| --- | :---: | --- | --- |\n| **[Initialization Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#1-initialization-phase)**| | | **Deterministically evaluate if quorum participation necessary** |\n| | | | Each quorum participant establishes connections to a set of quorum participants [as described in DIP6](https://github.com/dashpay/dips/blob/master/dip-0006.md#building-the-set-of-deterministic-connections) |\n| **[Contribution Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#2-contribution-phase)** | | | **Send quorum contributions (intra-quorum communication)** |\n|`inv` message (qcontrib)                        | \u2192 |                              | Masternode sends inventory for its quorum contribution _to other masternodes in the quorum_\n|                                                | \u2190 | [`getdata` message](core-ref-p2p-network-data-messages#getdata) (qcontrib) | Peer(s) respond with request for quorum contribution\n| [`qcontrib` message](core-ref-p2p-network-quorum-messages#qcontrib)                             | \u2192 |                              | Masternode sends the requested quorum contribution\n| **[Complaining Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#3-complaining-phase)** | | | **Send complaints for any peers with invalid or missing contributions (intra-quorum communication)** |\n|`inv` message (qcomplaint)                      | \u2192 |                              | Masternode sends inventory for any complaints _to other masternodes in the quorum_\n|                                                | \u2190 | [`getdata` message](core-ref-p2p-network-data-messages#getdata) (qcomplaint) | Peer(s) respond with request for quorum complaints\n| [`qcomplaint` message](core-ref-p2p-network-quorum-messages#qcomplaint)                           | \u2192 |                              | Masternode sends the requested complaints\n| **[Justification Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#4-justification-phase)** | | | **Send justification responses for any complaints against own contributions (intra-quorum communication)** |\n|`inv` message (qjustify)                        | \u2192 |                              | Masternode sends inventory for any justifications _to other masternodes in the quorum_\n|                                                | \u2190 | [`getdata` message](core-ref-p2p-network-data-messages#getdata) (qjustify) | Peer(s) respond with request for quorum justifications\n| [`qjustify` message](core-ref-p2p-network-quorum-messages#qjustify)                             | \u2192 |                              | Masternode sends the requested justifications\n| **[Commitment Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#5-commitment-phase)** | | | **Send premature commitment containing the quorum public key (intra-quorum communication)** |\n|`inv` message (qpcommit)                        | \u2192 |                              | Masternode sends inventory for its premature commitment _to other masternodes in the quorum_\n|                                                | \u2190 | [`getdata` message](core-ref-p2p-network-data-messages#getdata) (qpcommit) | Peer(s) respond with request for quorum premature commitment\n| [`qpcommit` message](core-ref-p2p-network-quorum-messages#qpcommit)                             | \u2192 |                              | Masternode sends the requested premature commitment\n| **[Finalization Phase](https://github.com/dashpay/dips/blob/master/dip-0006.md#6-finalization-phase)** | | | **Send final commitment containing the quorum public key** |\n|`inv` message (qfcommit)                        | \u2192 |                              | Masternode sends inventory for its premature commitment **to all peers**\n|                                                | \u2190 | [`getdata` message](core-ref-p2p-network-data-messages#getdata) (qfcommit) | Peer(s) respond with request for quorum final commitment\n| [`qfcommit` message](core-ref-p2p-network-quorum-messages#qfcommit)                             | \u2192 |                              | Masternode sends the requested final commitment\n\n# LLMQ Signing Session\n\nThe following table details the data flow of P2P messages exchanged during an LLMQ signing session. These sessions take advantage of BLS threshold signatures to enable quorums to sign arbitrary messages. For example, Dash Core 0.14 uses this capability to create the quorum signature found in the [`clsig` message](core-ref-p2p-network-instantsend-messages#clsig) that enables <<glossary:ChainLocks>>.\n\nPlease read [DIP7 LLMQ Signing Requests / Sessions](https://github.com/dashpay/dips/blob/master/dip-0007.md) for additional details.\n\n*LLMQ Signing Session Data Flow*\n\n| **Masternode** | **Direction**  | **Peers**   | **Description** |\n| --- | :---: | --- | --- |\n| **[Siging Request Phase](https://github.com/dashpay/dips/blob/master/dip-0007.md#signing-request)** | | | Request quorum signing of a message (e.g. InstantSend transaction input) (intra-quorum communication) |\n| [`qsigsesann` message](core-ref-p2p-network-quorum-messages#qsigsesann)                             | \u2192 |                              | Masternode sends a signing session announcement _to other masternodes in the quorum_\n| **[Share Propagation Phase](https://github.com/dashpay/dips/blob/master/dip-0007.md#propagating-signature-shares)** | | | Members exchange signature shares within the quorum (intra-quorum communication) |\n| [`qsigsinv` message](core-ref-p2p-network-quorum-messages#qsigsinv)                             | \u2192 |                              | Masternode sends one or more quorum signature share inventories _to other masternodes in the quorum_<br>_May occur multiple times in this phase_\n|                                                | \u2190 | [`qgetsigs` message](core-ref-p2p-network-quorum-messages#qgetsigs) (qcontrib) | Peer(s) respond with request for signature shares<br>_May occur multiple times in this phase_\n| [`qbsigs` message](core-ref-p2p-network-quorum-messages#qbsigs)                             | \u2192 |                              | Masternode sends the requested batched signature share(s)<br>_May occur multiple times in this phase_\n| **[Threshold Signature Recovery Phase](https://github.com/dashpay/dips/blob/master/dip-0007.md#recovered-threshold-signatures)** | | | A recovered signature is created by a quorum member once valid signature shares from at least the threshold number of members have been received |\n| [`qsigrec` message](core-ref-p2p-network-quorum-messages#qsigrec)                             | \u2192 |                              | Masternode sends the quorum recovered signature **to all peers** (except those that have asked to be excluded via a [`qsendrecsigs` message](core-ref-p2p-network-quorum-messages#qsendrecsigs))\n\nNote the following timeouts defined by Dash Core related to signing sessions:\n\n| Parameter | Timeout, sec | Description |\n| --- | --- | --- |\n| `SESSION_NEW_SHARES_TIMEOUT` | 60 | Time to wait for new shares |\n| `SIG_SHARE_REQUEST_TIMEOUT` | 5 | Time to wait for a requested share before requesting from a different node |\n| `SESSION_TOTAL_TIMEOUT` | 300 | Time to wait for session to complete |\n\n# Quorum Configuration\n\nMainnet and Testnet only use quorums of pre-defined sizes that are hard coded into Dash Core. RegTest and Devnet environments each have a quorum that supports custom size and threshold parameters that are controlled via command line or configuration file parameters (`llmqtestparams`/`llmqdevnetparams`).\n\nA list of all the quorums and their default sizes can be found in the [Current LLMQ Types table](https://github.com/dashpay/dips/blob/master/dip-0006.md#current-llmq-types) found in DIP-6.\n\nThe specific quorum type used for a feature can vary based on the network. The following table shows which quorums are used for each feature on the various networks:\n\n| | Mainnet | Testnet | Devnet * | RegTest * |\n|-|-|-|-|-|\n| ChainLocks ([DIP-8](https://github.com/dashpay/dips/blob/master/dip-0008.md)) | LLMQ_400_60 | LLMQ_50_60 | LLMQ_50_60 | LLMQ_TEST |\n| Deterministic InstantSend | LLMQ_60_75 | LLMQ_60_75 | LLMQ_60_75 | LLMQ_TEST_DIP0024 |\n| InstantSend (pre DIP-24) | LLMQ_50_60 | LLMQ_50_60 | LLMQ_50_60 | LLMQ_TEST_INSTANTSEND |\n| Platform | LLMQ_100_67 | LLMQ_25_67 | LLMQ_100_67 | LLMQ_TEST_PLATFORM |\n| Enhanced Hard Fork ([DIP-23](https://github.com/dashpay/dips/blob/master/dip-0023.md))| LLMQ_400_85 | LLMQ_50_60 | LLMQ_50_60 | LLMQ_TEST |\n\n\\* Note that the quorum types used on RegTest and Devnets have customizable parameters as described above\n\n## Quorum formation\n\nThe quorum formation process operates regardless of quorum usage. So the [DKG process](#llmq-creation-dkg) will be attempted for _all quorum types enabled on a network_ regardless of whether or not that quorum type is going to be used.\n\nThe following table showing which quorums are enabled for each network type is derived from information taken from Dash Core's [chainparams.cpp](https://github.com/dashpay/dash/blob/master/src/chainparams.cpp) file:\n\n| Quorum type | Mainnet | Testnet | Devnet | RegTest |\n|-|:-:|:-:|:-:|:-:|\n| LLMQ_50_60 | x | x | x | - |\n| LLMQ_60_75 | x | x | x | - |\n| LLMQ_400_60 | x | x | x | - |\n| LLMQ_400_85 | x | x | x | - |\n| LLMQ_100_67 | x | x | x | - |\n| LLMQ_25_67 | - | x | - | - |\n| LLMQ_DEVNET | - | - | x | - |\n| LLMQ_DEVNET_DIP0024 | - | - | x | - |\n| LLMQ_DEVNET_PLATFORM | - | - | x | - |\n| LLMQ_TEST | - | - | - | x |\n| LLMQ_TEST_INSTANTSEND | - | - | - | x |\n| LLMQ_TEST_V17 | - | - | - | x |\n| LLMQ_TEST_DIP0024 | - | - | - | x |\n| LLMQ_TEST_PLATFORM | - | - | - | x |",
 "order": 4,
 "isReference": false,
 "deprecated": false,
 "hidden": false,
 "sync_unique": "",
 "link_url": "",
 "link_external": false,
 "reusableContent": [],
 "previousSlug": "",
 "slugUpdatedAt": "2021-03-24T15:50:39.127Z",
 "revision": 18,
 "_id": "63f5176df91c7700118e77c5",
 "version": "63f5176df91c7700118e7825",
 "updatedAt": "2023-03-09T17:17:19.462Z",
 "createdAt": "2019-10-23T19:52:06.438Z",
 "project": "5daf2e65f4109c0040fd51e1",
 "user": "5b8400d7185d5e00036dcc3b",
 "parentDoc": "63f5176df91c7700118e77bd",
 "category": "63f5176df91c7700118e779e",
 "__v": 3,
 "pendingAlgoliaPublish": false,
 "isApi": false,
 "id": "63f5176df91c7700118e77c5",
 "body_html": "<p>Dash&#x27;s <span class=\"GlossaryItem-trigger\">masternode</span> quorums are used to facilitate the operation of masternode provided features in a decentralized, deterministic way. The original quorums (used largely for <span class=\"GlossaryItem-trigger\">InstantSend</span> and masternode payments) were ephemeral and used for a single purpose (e.g. voting on one specific InstantSend transaction).</p>\n<p>Dash Core 0.14 (protocol version 70214) introduced the <span class=\"GlossaryItem-trigger\">Long-Living Masternode Quorum</span>  (LLMQ) system described in detail by <a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md\" target=\"\" title=\"\">DIP6</a>. These LLMQs are deterministic subsets of the global deterministic masternode list that are formed via a distributed key generation (DKG) protocol and remain active for a long periods of time (e.g. hours to days).</p>\n<p>The main task of LLMQs is to perform threshold signing of consensus-related messages (e.g. <span class=\"GlossaryItem-trigger\">ChainLocks</span>).</p>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"llmq-creation-dkg\"></div><div class=\"heading-text\"><div id=\"section-llmq-creation-dkg\" class=\"heading-anchor_backwardsCompatibility\"></div>LLMQ Creation (DKG)</div><a aria-label=\"Skip link to LLMQ Creation (DKG)\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#llmq-creation-dkg\"></a></h1>\n<p>The following table details the data flow of P2P messages exchanged during the distributed key generation (DKG) protocol used to establish an LLMQ.</p>\n<blockquote class=\"callout callout_info\" theme=\"\ud83d\udcd8\"><h2 class=\"callout-heading\"><span class=\"callout-icon\">\ud83d\udcd8</span><p>Intra-Quorum Communication</p></h2><p>Note: With the exception of the final step (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qfcommit</code> message broadcast), the message exchanges happen only between masternodes participating in the DKG process via the <a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#intra-quorum-communication\" target=\"\" title=\"\">Intra-Quorum communication process</a> described in the DIP.</p></blockquote>\n<p><em>Quorum DKG Data Flow</em></p>\n<blockquote class=\"callout callout_warn\" theme=\"\ud83d\udea7\"><h2 class=\"callout-heading\"><span class=\"callout-icon\">\ud83d\udea7</span><p>Minimum Masternode Protocol Version</p></h2><p>As of Dash Core 0.16.0, masternodes perform a <a href=\"https://github.com/dashpay/dash/pull/3390\" target=\"\" title=\"\">version check</a> on their quorum peers during DKG. Masternodes that do not meet the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">MIN_MASTERNODE_PROTO_VERSION</code> (70227 in Dash Core 19.0) will begin receiving increases in <a href=\"core-guide-dash-features-proof-of-service\" target=\"\" title=\"\">PoSe</a> score once 60% of the masternodes on the network have upgraded to that version.</p></blockquote>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th><strong>Masternode</strong></th><th style=\"text-align:center\"><strong>Direction</strong></th><th><strong>Peers</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#1-initialization-phase\" target=\"\" title=\"\">Initialization Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Deterministically evaluate if quorum participation necessary</strong></td></tr><tr><td></td><td style=\"text-align:center\"></td><td></td><td>Each quorum participant establishes connections to a set of quorum participants <a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#building-the-set-of-deterministic-connections\" target=\"\" title=\"\">as described in DIP6</a></td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#2-contribution-phase\" target=\"\" title=\"\">Contribution Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Send quorum contributions (intra-quorum communication)</strong></td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inv</code> message (qcontrib)</td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends inventory for its quorum contribution <em>to other masternodes in the quorum</em></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-data-messages#getdata\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">getdata</code> message</a> (qcontrib)</td><td>Peer(s) respond with request for quorum contribution</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qcontrib\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qcontrib</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested quorum contribution</td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#3-complaining-phase\" target=\"\" title=\"\">Complaining Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Send complaints for any peers with invalid or missing contributions (intra-quorum communication)</strong></td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inv</code> message (qcomplaint)</td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends inventory for any complaints <em>to other masternodes in the quorum</em></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-data-messages#getdata\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">getdata</code> message</a> (qcomplaint)</td><td>Peer(s) respond with request for quorum complaints</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qcomplaint\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qcomplaint</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested complaints</td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#4-justification-phase\" target=\"\" title=\"\">Justification Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Send justification responses for any complaints against own contributions (intra-quorum communication)</strong></td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inv</code> message (qjustify)</td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends inventory for any justifications <em>to other masternodes in the quorum</em></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-data-messages#getdata\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">getdata</code> message</a> (qjustify)</td><td>Peer(s) respond with request for quorum justifications</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qjustify\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qjustify</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested justifications</td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#5-commitment-phase\" target=\"\" title=\"\">Commitment Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Send premature commitment containing the quorum public key (intra-quorum communication)</strong></td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inv</code> message (qpcommit)</td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends inventory for its premature commitment <em>to other masternodes in the quorum</em></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-data-messages#getdata\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">getdata</code> message</a> (qpcommit)</td><td>Peer(s) respond with request for quorum premature commitment</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qpcommit\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qpcommit</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested premature commitment</td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#6-finalization-phase\" target=\"\" title=\"\">Finalization Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td><strong>Send final commitment containing the quorum public key</strong></td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inv</code> message (qfcommit)</td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends inventory for its premature commitment <strong>to all peers</strong></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-data-messages#getdata\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">getdata</code> message</a> (qfcommit)</td><td>Peer(s) respond with request for quorum final commitment</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qfcommit\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qfcommit</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested final commitment</td></tr></tbody></table></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"llmq-signing-session\"></div><div class=\"heading-text\"><div id=\"section-llmq-signing-session\" class=\"heading-anchor_backwardsCompatibility\"></div>LLMQ Signing Session</div><a aria-label=\"Skip link to LLMQ Signing Session\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#llmq-signing-session\"></a></h1>\n<p>The following table details the data flow of P2P messages exchanged during an LLMQ signing session. These sessions take advantage of BLS threshold signatures to enable quorums to sign arbitrary messages. For example, Dash Core 0.14 uses this capability to create the quorum signature found in the <a href=\"core-ref-p2p-network-instantsend-messages#clsig\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">clsig</code> message</a> that enables <span class=\"GlossaryItem-trigger\">ChainLocks</span>.</p>\n<p>Please read <a href=\"https://github.com/dashpay/dips/blob/master/dip-0007.md\" target=\"\" title=\"\">DIP7 LLMQ Signing Requests / Sessions</a> for additional details.</p>\n<p><em>LLMQ Signing Session Data Flow</em></p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th><strong>Masternode</strong></th><th style=\"text-align:center\"><strong>Direction</strong></th><th><strong>Peers</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0007.md#signing-request\" target=\"\" title=\"\">Siging Request Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td>Request quorum signing of a message (e.g. InstantSend transaction input) (intra-quorum communication)</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qsigsesann\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qsigsesann</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends a signing session announcement <em>to other masternodes in the quorum</em></td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0007.md#propagating-signature-shares\" target=\"\" title=\"\">Share Propagation Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td>Members exchange signature shares within the quorum (intra-quorum communication)</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qsigsinv\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qsigsinv</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends one or more quorum signature share inventories <em>to other masternodes in the quorum</em><br/><em>May occur multiple times in this phase</em></td></tr><tr><td></td><td style=\"text-align:center\">\u2190</td><td><a href=\"core-ref-p2p-network-quorum-messages#qgetsigs\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qgetsigs</code> message</a> (qcontrib)</td><td>Peer(s) respond with request for signature shares<br/><em>May occur multiple times in this phase</em></td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qbsigs\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qbsigs</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the requested batched signature share(s)<br/><em>May occur multiple times in this phase</em></td></tr><tr><td><strong><a href=\"https://github.com/dashpay/dips/blob/master/dip-0007.md#recovered-threshold-signatures\" target=\"\" title=\"\">Threshold Signature Recovery Phase</a></strong></td><td style=\"text-align:center\"></td><td></td><td>A recovered signature is created by a quorum member once valid signature shares from at least the threshold number of members have been received</td></tr><tr><td><a href=\"core-ref-p2p-network-quorum-messages#qsigrec\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qsigrec</code> message</a></td><td style=\"text-align:center\">\u2192</td><td></td><td>Masternode sends the quorum recovered signature <strong>to all peers</strong> (except those that have asked to be excluded via a <a href=\"core-ref-p2p-network-quorum-messages#qsendrecsigs\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">qsendrecsigs</code> message</a>)</td></tr></tbody></table></div></div>\n<p>Note the following timeouts defined by Dash Core related to signing sessions:</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Parameter</th><th>Timeout, sec</th><th>Description</th></tr></thead><tbody><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">SESSION_NEW_SHARES_TIMEOUT</code></td><td>60</td><td>Time to wait for new shares</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">SIG_SHARE_REQUEST_TIMEOUT</code></td><td>5</td><td>Time to wait for a requested share before requesting from a different node</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">SESSION_TOTAL_TIMEOUT</code></td><td>300</td><td>Time to wait for session to complete</td></tr></tbody></table></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"quorum-configuration\"></div><div class=\"heading-text\"><div id=\"section-quorum-configuration\" class=\"heading-anchor_backwardsCompatibility\"></div>Quorum Configuration</div><a aria-label=\"Skip link to Quorum Configuration\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#quorum-configuration\"></a></h1>\n<p>Mainnet and Testnet only use quorums of pre-defined sizes that are hard coded into Dash Core. RegTest and Devnet environments each have a quorum that supports custom size and threshold parameters that are controlled via command line or configuration file parameters (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">llmqtestparams</code>/<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">llmqdevnetparams</code>).</p>\n<p>A list of all the quorums and their default sizes can be found in the <a href=\"https://github.com/dashpay/dips/blob/master/dip-0006.md#current-llmq-types\" target=\"\" title=\"\">Current LLMQ Types table</a> found in DIP-6.</p>\n<p>The specific quorum type used for a feature can vary based on the network. The following table shows which quorums are used for each feature on the various networks:</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th></th><th>Mainnet</th><th>Testnet</th><th>Devnet *</th><th>RegTest *</th></tr></thead><tbody><tr><td>ChainLocks (<a href=\"https://github.com/dashpay/dips/blob/master/dip-0008.md\" target=\"\" title=\"\">DIP-8</a>)</td><td>LLMQ_400_60</td><td>LLMQ_50_60</td><td>LLMQ_50_60</td><td>LLMQ_TEST</td></tr><tr><td>Deterministic InstantSend</td><td>LLMQ_60_75</td><td>LLMQ_60_75</td><td>LLMQ_60_75</td><td>LLMQ_TEST_DIP0024</td></tr><tr><td>InstantSend (pre DIP-24)</td><td>LLMQ_50_60</td><td>LLMQ_50_60</td><td>LLMQ_50_60</td><td>LLMQ_TEST_INSTANTSEND</td></tr><tr><td>Platform</td><td>LLMQ_100_67</td><td>LLMQ_25_67</td><td>LLMQ_100_67</td><td>LLMQ_TEST_PLATFORM</td></tr><tr><td>Enhanced Hard Fork (<a href=\"https://github.com/dashpay/dips/blob/master/dip-0023.md\" target=\"\" title=\"\">DIP-23</a>)</td><td>LLMQ_400_85</td><td>LLMQ_50_60</td><td>LLMQ_50_60</td><td>LLMQ_TEST</td></tr></tbody></table></div></div>\n<p>* Note that the quorum types used on RegTest and Devnets have customizable parameters as described above</p>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"quorum-formation\"></div><div class=\"heading-text\"><div id=\"section-quorum-formation\" class=\"heading-anchor_backwardsCompatibility\"></div>Quorum formation</div><a aria-label=\"Skip link to Quorum formation\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#quorum-formation\"></a></h2>\n<p>The quorum formation process operates regardless of quorum usage. So the <a href=\"#llmq-creation-dkg\" target=\"\" title=\"\">DKG process</a> will be attempted for <em>all quorum types enabled on a network</em> regardless of whether or not that quorum type is going to be used.</p>\n<p>The following table showing which quorums are enabled for each network type is derived from information taken from Dash Core&#x27;s <a href=\"https://github.com/dashpay/dash/blob/master/src/chainparams.cpp\" target=\"\" title=\"\">chainparams.cpp</a> file:</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Quorum type</th><th style=\"text-align:center\">Mainnet</th><th style=\"text-align:center\">Testnet</th><th style=\"text-align:center\">Devnet</th><th style=\"text-align:center\">RegTest</th></tr></thead><tbody><tr><td>LLMQ_50_60</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_60_75</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_400_60</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_400_85</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_100_67</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_25_67</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_DEVNET</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_DEVNET_DIP0024</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_DEVNET_PLATFORM</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td><td style=\"text-align:center\">-</td></tr><tr><td>LLMQ_TEST</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td></tr><tr><td>LLMQ_TEST_INSTANTSEND</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td></tr><tr><td>LLMQ_TEST_V17</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td></tr><tr><td>LLMQ_TEST_DIP0024</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td></tr><tr><td>LLMQ_TEST_PLATFORM</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">-</td><td style=\"text-align:center\">x</td></tr></tbody></table></div></div>"
}