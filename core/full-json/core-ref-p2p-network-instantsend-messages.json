{
 "metadata": {
  "image": [],
  "title": "Dash InstantSend Messages",
  "description": "InstantSend uses the masternode network to lock transaction inputs and enable secure, instantaneous transactions.",
  "keywords": "",
  "robots": "index"
 },
 "api": {
  "method": "get",
  "url": "",
  "auth": "required",
  "results": {
   "codes": [
    {
     "status": 200,
     "language": "json",
     "code": "{}",
     "name": ""
    },
    {
     "status": 400,
     "language": "json",
     "code": "{}",
     "name": ""
    }
   ]
  },
  "params": []
 },
 "next": {
  "description": "",
  "pages": [
   {
    "type": "doc",
    "icon": "file-text-o",
    "name": "Masternode Messages",
    "slug": "core-ref-p2p-network-masternode-messages",
    "category": "Core Reference"
   }
  ]
 },
 "algolia": {
  "recordCount": 4,
  "publishPending": false,
  "translationFailure": false,
  "updatedAt": "2023-02-23T20:39:36.654Z"
 },
 "title": "InstantSend Messages",
 "icon": "",
 "updates": [],
 "type": "basic",
 "slug": "core-ref-p2p-network-instantsend-messages",
 "excerpt": "",
 "body": "The following network messages all help control the InstantSend feature of Dash. InstantSend uses the masternode network to lock transaction inputs and enable secure, instantaneous transactions. For additional details, refer to the Developer Guide [InstantSend section](core-guide-dash-features-instantsend).\n\n# clsig\n\n*Added in protocol version 70214 of Dash Core*\n\nThe [`clsig` message](core-ref-p2p-network-instantsend-messages#clsig) is used to indicate a successful ChainLock for the designated <<glossary:block height>>. The Chainlock ensures that no other <<glossary:blocks>> can replace the one with the indicated block hash. This determination is made by agreement of a <<glossary:Long-Living Masternode Quorum>> (LLMQ) which creates the BLS signature in the message.\n\nOnce a [`clsig` message](core-ref-p2p-network-instantsend-messages#clsig) is received, clients must reject any other blocks for the indicated block height as described in [DIP8 (ChainLocks)](https://github.com/dashpay/dips/blob/master/dip-0008.md). This increases security by preventing reorganization of a block with a ChainLock (and all blocks below it).\n\n| Bytes | Name | Data type | Description |\n| --- | --- | --- | --- |\n| 4 | nHeight | int32_t | Block height\n| 32 | blockHash | uint256 | Block hash\n| 96 | sig | CBLSSignature | LLMQ BLS signature<br>**Note**: serialized using the basic BLS scheme after Dash 19.0 activation\n\nThe following annotated hexdump shows a [`clsig` message](core-ref-p2p-network-instantsend-messages#clsig). (The message header has been omitted.)\n\n``` text\nc1310100 ................................... Block Height: 78273\n\n03bb286a877135fad3b33ea9cce9a525\ne5edc0879411afaff513b30100000000 ........... Block Hash\n\n12a3331fd8d0008804edaaf94c57b491\nd36f38f1993d06dfff71df9ec83da463\ndcd5497d105932e609016dac075f02df\n1259951e3bcebfcc26afc904f6cd92df\n7ff9b8c6c2ac9dcc9cb1a7dc7ec03bcc\n005574710c3aabc2f8670959cf8bc9b5 ........... LLMQ BLS Signature\n```\n\n# islock\n\n*Added in protocol version 70214 of Dash Core*\n\n> \ud83d\udea7 Future deprecation\n>\n> The [`isdlock` message](#isdlock) with expanded features will eventually replace this message. Protocol version 70220 maintains backwards compatibility for older clients.\n\nThe [`islock` message](core-ref-p2p-network-instantsend-messages#islock) is used to provide details of transactions that have been locked by LLMQ-based InstantSend. The message includes the details of all transaction <<glossary:inputs>> along with the transaction ID and the BLS <<glossary:signature>> of the <<glossary:LLMQ>> that approved the transaction lock.\n\n| Bytes | Name | Data type | Description |\n| --- | --- | --- | --- |\n| 1-9 | inputsSize | compactSize uint | Number of inputs |\n| 36 * `inputsSize`| inputs | COutPoint | Outpoints used in the transaction |\n| 32 | txid | uint256 | TXID of the locked transaction |\n| 96 | sig | byte[] | LLMQ BLS Signature |\n\nThe following annotated hexdump shows a [`islock` message](core-ref-p2p-network-instantsend-messages#islock). (The message header has been omitted.)\n\n``` text\n02 ......................................... Number of inputs: 2\n\nInput 1\n| 05f24f65a9d98ff543ba61f7f0ce9448\n| 79632bf2517540a5bd8bde2fe8e94617 ......... Previous outpoint TXID\n| 00000000 ................................. Previous outpoint index: 0\n\nInput 2\n| 05f24f65a9d98ff543ba61f7f0ce9448\n| 79632bf2517540a5bd8bde2fe8e94617 ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\ne2e1c797576d8b13c83e929684b9aacd\n553c20a34e2d11e38bdcaaf8e1de1680 ........... TXID\n\n0f055c2064885d446f83d51b9bb09892\n7ea0375a0f6a3f3402abf158ece67e00\n81049b8a8f45d254b64574cef194ef31\n197e450fba1196d652f2e1421d3b80ae\nf429c10eabd4ab9289e9a8f80f6989b7\na11e5e7930deccc3e11a931fc9524f06 ........... LLMQ BLS Signature (96 bytes)\n```\n\n# isdlock\n\n> \ud83d\udcd8\n>\n> *Added in protocol version 70220 of Dash Core*\n\nThe [`isdlock` message](core-ref-p2p-network-instantsend-messages#isdlock) is used to provide details of transactions that have been locked by InstantSend. The message includes all details present in the [`islock` message](#islock) along with additional version and cycle information introduced by [DIP22](https://github.com/dashpay/dips/blob/master/dip-0022.md).  This enables nodes to determine what quorum signed the message and validate the signature in the future after the quorum is no longer active. Additional details about the change are available in [DIP22 - Making InstantSend Deterministic using Quorum Cycles](https://github.com/dashpay/dips/blob/master/dip-0022.md).\n\n| Bytes | Name | Data type | Description |\n| --- | --- | --- | --- |\n| 1 | version | uint8 | The version of the islock message |\n| 1-9 | inputsSize | compactSize uint | Number of inputs |\n| 36 * `inputsSize`| inputs | COutPoint | Outpoints used in the transaction |\n| 32 | txid | uint256 | TXID of the locked transaction |\n| 32 | cycleHash | uint256 | Block hash of first block of the cycle in which the quorum signing this islock is active |\n| 96 | sig | byte[] | LLMQ BLS Signature<br>**Note**: serialized using the basic BLS scheme after Dash 19.0 activation |\n\nThe following annotated hexdump shows a [`isdlock` message](core-ref-p2p-network-instantsend-messages#isdlock). (The message header has been omitted.)\n\n``` text\n01 ......................................... Message version: 1\n11 ......................................... Number of inputs: 17\n\nInput 1\n| d735fb8cb1b2c4f852e090824ed1b671\n| 93a6ed82dfb959487c80c9d520ce270b ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\nInput 2\n| c8ad33361d9dbc2f0a0e981987fa5c9c\n| a3df83991dddccab6498ac40d2976423 ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\n| [...] .................................... 15 transaction inputs omitted\n\nf3fd4540b5240abfeba62b766754647a\n32580ab3be974b0b63ac16d619675fee ........... TXID\n\nea830004232454df5db2c96b3da3c741\nd7729b0a293c967f7647a2731e000000 ........... Cycle hash\n\n9853fbfbc3592a06200e41617d30713f\n861586c7503972ecd09d00731f4fcd6c\n712a03c37906a14475e0e903e3ea9185\n043673aa8e6ff402eaea7adbdf06d2ab\n141fdd115a7162904e8a43c8f3efb67d\n05870b1b00c88445f77fa9cb1cb16c01 ........... LLMQ BLS Signature (96 bytes)\n```",
 "mdxAltBody": "",
 "order": 6,
 "isReference": false,
 "deprecated": false,
 "hidden": false,
 "sync_unique": "",
 "link_url": "",
 "link_external": false,
 "reusableContent": [],
 "previousSlug": "",
 "slugUpdatedAt": "2022-01-12T20:13:40.690Z",
 "revision": 3,
 "_id": "63f5176df91c7700118e77ab",
 "version": "63f5176df91c7700118e7825",
 "updatedAt": "2023-02-23T20:39:36.311Z",
 "createdAt": "2019-10-23T16:02:52.588Z",
 "project": "5daf2e65f4109c0040fd51e1",
 "user": "5b8400d7185d5e00036dcc3b",
 "parentDoc": "63f5176df91c7700118e77a5",
 "category": "63f5176df91c7700118e779d",
 "__v": 3,
 "pendingAlgoliaPublish": false,
 "isApi": false,
 "id": "63f5176df91c7700118e77ab",
 "body_html": "<p>The following network messages all help control the InstantSend feature of Dash. InstantSend uses the masternode network to lock transaction inputs and enable secure, instantaneous transactions. For additional details, refer to the Developer Guide <a href=\"core-guide-dash-features-instantsend\" target=\"\" title=\"\">InstantSend section</a>.</p>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"clsig\"></div><div class=\"heading-text\"><div id=\"section-clsig\" class=\"heading-anchor_backwardsCompatibility\"></div>clsig</div><a aria-label=\"Skip link to clsig\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#clsig\"></a></h1>\n<p><em>Added in protocol version 70214 of Dash Core</em></p>\n<p>The <a href=\"core-ref-p2p-network-instantsend-messages#clsig\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">clsig</code> message</a> is used to indicate a successful ChainLock for the designated <span class=\"GlossaryItem-trigger\">block height</span>. The Chainlock ensures that no other <span class=\"GlossaryItem-trigger\">blocks</span> can replace the one with the indicated block hash. This determination is made by agreement of a <span class=\"GlossaryItem-trigger\">Long-Living Masternode Quorum</span> (LLMQ) which creates the BLS signature in the message.</p>\n<p>Once a <a href=\"core-ref-p2p-network-instantsend-messages#clsig\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">clsig</code> message</a> is received, clients must reject any other blocks for the indicated block height as described in <a href=\"https://github.com/dashpay/dips/blob/master/dip-0008.md\" target=\"\" title=\"\">DIP8 (ChainLocks)</a>. This increases security by preventing reorganization of a block with a ChainLock (and all blocks below it).</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Bytes</th><th>Name</th><th>Data type</th><th>Description</th></tr></thead><tbody><tr><td>4</td><td>nHeight</td><td>int32_t</td><td>Block height</td></tr><tr><td>32</td><td>blockHash</td><td>uint256</td><td>Block hash</td></tr><tr><td>96</td><td>sig</td><td>CBLSSignature</td><td>LLMQ BLS signature<br/><strong>Note</strong>: serialized using the basic BLS scheme after Dash 19.0 activation</td></tr></tbody></table></div></div>\n<p>The following annotated hexdump shows a <a href=\"core-ref-p2p-network-instantsend-messages#clsig\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">clsig</code> message</a>. (The message header has been omitted.)</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">Text</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-text theme-light\" data-lang=\"text\" name=\"\" tabindex=\"0\">c1310100 ................................... Block Height: 78273\n\n03bb286a877135fad3b33ea9cce9a525\ne5edc0879411afaff513b30100000000 ........... Block Hash\n\n12a3331fd8d0008804edaaf94c57b491\nd36f38f1993d06dfff71df9ec83da463\ndcd5497d105932e609016dac075f02df\n1259951e3bcebfcc26afc904f6cd92df\n7ff9b8c6c2ac9dcc9cb1a7dc7ec03bcc\n005574710c3aabc2f8670959cf8bc9b5 ........... LLMQ BLS Signature\n</code></pre></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"islock\"></div><div class=\"heading-text\"><div id=\"section-islock\" class=\"heading-anchor_backwardsCompatibility\"></div>islock</div><a aria-label=\"Skip link to islock\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#islock\"></a></h1>\n<p><em>Added in protocol version 70214 of Dash Core</em></p>\n<blockquote class=\"callout callout_warn\" theme=\"\ud83d\udea7\"><h2 class=\"callout-heading\"><span class=\"callout-icon\">\ud83d\udea7</span><p>Future deprecation</p></h2><p>The <a href=\"#isdlock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">isdlock</code> message</a> with expanded features will eventually replace this message. Protocol version 70220 maintains backwards compatibility for older clients.</p></blockquote>\n<p>The <a href=\"core-ref-p2p-network-instantsend-messages#islock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">islock</code> message</a> is used to provide details of transactions that have been locked by LLMQ-based InstantSend. The message includes the details of all transaction <span class=\"GlossaryItem-trigger\">inputs</span> along with the transaction ID and the BLS <span class=\"GlossaryItem-trigger\">signature</span> of the <span class=\"GlossaryItem-trigger\">LLMQ</span> that approved the transaction lock.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Bytes</th><th>Name</th><th>Data type</th><th>Description</th></tr></thead><tbody><tr><td>1-9</td><td>inputsSize</td><td>compactSize uint</td><td>Number of inputs</td></tr><tr><td>36 * <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inputsSize</code></td><td>inputs</td><td>COutPoint</td><td>Outpoints used in the transaction</td></tr><tr><td>32</td><td>txid</td><td>uint256</td><td>TXID of the locked transaction</td></tr><tr><td>96</td><td>sig</td><td>byte[]</td><td>LLMQ BLS Signature</td></tr></tbody></table></div></div>\n<p>The following annotated hexdump shows a <a href=\"core-ref-p2p-network-instantsend-messages#islock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">islock</code> message</a>. (The message header has been omitted.)</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">Text</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-text theme-light\" data-lang=\"text\" name=\"\" tabindex=\"0\">02 ......................................... Number of inputs: 2\n\nInput 1\n| 05f24f65a9d98ff543ba61f7f0ce9448\n| 79632bf2517540a5bd8bde2fe8e94617 ......... Previous outpoint TXID\n| 00000000 ................................. Previous outpoint index: 0\n\nInput 2\n| 05f24f65a9d98ff543ba61f7f0ce9448\n| 79632bf2517540a5bd8bde2fe8e94617 ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\ne2e1c797576d8b13c83e929684b9aacd\n553c20a34e2d11e38bdcaaf8e1de1680 ........... TXID\n\n0f055c2064885d446f83d51b9bb09892\n7ea0375a0f6a3f3402abf158ece67e00\n81049b8a8f45d254b64574cef194ef31\n197e450fba1196d652f2e1421d3b80ae\nf429c10eabd4ab9289e9a8f80f6989b7\na11e5e7930deccc3e11a931fc9524f06 ........... LLMQ BLS Signature (96 bytes)\n</code></pre></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"isdlock\"></div><div class=\"heading-text\"><div id=\"section-isdlock\" class=\"heading-anchor_backwardsCompatibility\"></div>isdlock</div><a aria-label=\"Skip link to isdlock\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#isdlock\"></a></h1>\n<blockquote class=\"callout callout_info\" theme=\"\ud83d\udcd8\"><h2 class=\"callout-heading empty\"><span class=\"callout-icon\">\ud83d\udcd8</span></h2><p><em>Added in protocol version 70220 of Dash Core</em></p></blockquote>\n<p>The <a href=\"core-ref-p2p-network-instantsend-messages#isdlock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">isdlock</code> message</a> is used to provide details of transactions that have been locked by InstantSend. The message includes all details present in the <a href=\"#islock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">islock</code> message</a> along with additional version and cycle information introduced by <a href=\"https://github.com/dashpay/dips/blob/master/dip-0022.md\" target=\"\" title=\"\">DIP22</a>.  This enables nodes to determine what quorum signed the message and validate the signature in the future after the quorum is no longer active. Additional details about the change are available in <a href=\"https://github.com/dashpay/dips/blob/master/dip-0022.md\" target=\"\" title=\"\">DIP22 - Making InstantSend Deterministic using Quorum Cycles</a>.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Bytes</th><th>Name</th><th>Data type</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>version</td><td>uint8</td><td>The version of the islock message</td></tr><tr><td>1-9</td><td>inputsSize</td><td>compactSize uint</td><td>Number of inputs</td></tr><tr><td>36 * <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">inputsSize</code></td><td>inputs</td><td>COutPoint</td><td>Outpoints used in the transaction</td></tr><tr><td>32</td><td>txid</td><td>uint256</td><td>TXID of the locked transaction</td></tr><tr><td>32</td><td>cycleHash</td><td>uint256</td><td>Block hash of first block of the cycle in which the quorum signing this islock is active</td></tr><tr><td>96</td><td>sig</td><td>byte[]</td><td>LLMQ BLS Signature<br/><strong>Note</strong>: serialized using the basic BLS scheme after Dash 19.0 activation</td></tr></tbody></table></div></div>\n<p>The following annotated hexdump shows a <a href=\"core-ref-p2p-network-instantsend-messages#isdlock\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">isdlock</code> message</a>. (The message header has been omitted.)</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">Text</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-text theme-light\" data-lang=\"text\" name=\"\" tabindex=\"0\">01 ......................................... Message version: 1\n11 ......................................... Number of inputs: 17\n\nInput 1\n| d735fb8cb1b2c4f852e090824ed1b671\n| 93a6ed82dfb959487c80c9d520ce270b ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\nInput 2\n| c8ad33361d9dbc2f0a0e981987fa5c9c\n| a3df83991dddccab6498ac40d2976423 ......... Previous outpoint TXID\n| 01000000 ................................. Previous outpoint index: 1\n\n| [...] .................................... 15 transaction inputs omitted\n\nf3fd4540b5240abfeba62b766754647a\n32580ab3be974b0b63ac16d619675fee ........... TXID\n\nea830004232454df5db2c96b3da3c741\nd7729b0a293c967f7647a2731e000000 ........... Cycle hash\n\n9853fbfbc3592a06200e41617d30713f\n861586c7503972ecd09d00731f4fcd6c\n712a03c37906a14475e0e903e3ea9185\n043673aa8e6ff402eaea7adbdf06d2ab\n141fdd115a7162904e8a43c8f3efb67d\n05870b1b00c88445f77fa9cb1cb16c01 ........... LLMQ BLS Signature (96 bytes)\n</code></pre></div></div>"
}