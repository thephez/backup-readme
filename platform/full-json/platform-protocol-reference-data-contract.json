{
 "metadata": {
  "keywords": "",
  "robots": "index",
  "image": [],
  "title": "",
  "description": ""
 },
 "mdx": {
  "altBody": "",
  "status": "rdmd"
 },
 "api": {
  "method": "get",
  "url": "",
  "auth": "required",
  "results": {
   "codes": [
    {
     "name": "",
     "code": "{}",
     "language": "json",
     "status": 200
    },
    {
     "name": "",
     "code": "{}",
     "language": "json",
     "status": 400
    }
   ]
  },
  "params": [],
  "examples": {
   "codes": []
  }
 },
 "next": {
  "description": "",
  "pages": []
 },
 "algolia": {
  "translationFailure": false,
  "publishPending": false,
  "recordCount": 22,
  "updatedAt": "2023-09-06T16:36:43.573Z"
 },
 "reusableContent": [],
 "_id": "64f8a9df750465004742adc0",
 "title": "Data Contract",
 "updates": [],
 "type": "basic",
 "slug": "platform-protocol-reference-data-contract",
 "excerpt": "",
 "body": "# Data Contract Overview\n\nData contracts define the schema (structure) of data an application will store on Dash Platform. Contracts are described using [JSON Schema](https://json-schema.org/understanding-json-schema/) which allows the platform to validate the contract-related data submitted to it.\n\nThe following sections provide details that developers need to construct valid contracts: [documents](#data-contract-documents) and [definitions](#data-contract-definitions). All data contracts must define one or more documents, whereas definitions are optional and may not be used for simple contracts.\n\n## General Constraints\n\nThere are a variety of constraints currently defined for performance and security reasons. The following constraints are applicable to all aspects of data contracts. Unless otherwise noted, these constraints are defined in the platform's JSON Schema rules (e.g. [rs-dpp data contract meta schema](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json)).\n\n### Keyword\n\n> \ud83d\udea7 \n> \n> The `$ref` keyword has been [disabled](https://github.com/dashevo/platform/pull/300) since Platform v0.22.\n\n| Keyword                                                | Constraint                                                                                                         |\n| ------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------ |\n| `default`                                              | Restricted - cannot be used (defined in DPP logic)                                                                 |\n| `propertyNames`                                        | Restricted - cannot be used (defined in DPP logic)                                                                 |\n| `uniqueItems: true`                                    | `maxItems` must be defined (maximum: 100000)                                                                       |\n| `pattern: <something>`                                 | `maxLength` must be defined (maximum: 50000)                                                                       |\n| `format: <something>`                                  | `maxLength` must be defined (maximum: 50000)                                                                       |\n| `$ref: <something>`                                    | **Temporarily disabled**<br>`$ref` can only reference `$defs` - <br> remote references not supported               |\n| `if`, `then`, `else`, `allOf`, `anyOf`, `oneOf`, `not` | Disabled for data contracts                                                                                        |\n| `dependencies`                                         | Not supported. Use `dependentRequired` and `dependentSchema` instead                                               |\n| `additionalItems`                                      | Not supported. Use `items: false` and `prefixItems` instead                                                        |\n| `patternProperties`                                    | Restricted - cannot be used for data contracts                                                                     |\n| `pattern`                                              | Accept only [RE2](https://github.com/google/re2/wiki/Syntax) compatible regular expressions (defined in DPP logic) |\n\n### Data Size\n\n**Note:** These constraints are defined in the Dash Platform Protocol logic (not in JSON Schema).\n\nAll serialized data (including state transitions) is limited to a maximum size of [16 KB](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/util/serializer.rs#L8).\n\n### Additional Properties\n\nAlthough JSON Schema allows additional, undefined properties [by default](https://json-schema.org/understanding-json-schema/reference/object.html?#properties), they are not allowed in Dash Platform data contracts. Data contract validation will fail if they are not explicitly forbidden using the `additionalProperties` keyword anywhere `properties` are defined (including within document properties of type `object`).\n\nInclude the following at the same level as the `properties` keyword to ensure proper validation:\n\n```json\n\"additionalProperties\": false\n```\n\n# Data Contract Object\n\nThe data contract object consists of the following fields as defined in the JavaScript reference client ([rs-dpp](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json)):\n\n| Property        | Type           | Required | Description                                                                                                                                                                                                                                                                                              |\n| --------------- | -------------- | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| protocolVersion | integer        | Yes      | The platform protocol version ([currently `1`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9))                                                                                                                                                                  |\n| $schema         | string         | Yes      | A valid URL (default: <https://schema.dash.org/dpp-0-4-0/meta/data-contract>)                                                                                                                                                                                                                            |\n| $id             | array of bytes | Yes      | Contract ID generated from `ownerId` and entropy ([32 bytes; content media type: `application/x.dash.dpp.identifier`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L378-L384))                                                        |\n| version         | integer        | Yes      | The data contract version                                                                                                                                                                                                                                                                                |\n| ownerId         | array of bytes | Yes      | [Identity](platform-protocol-reference-identity) that registered the data contract defining the document ([32 bytes; content media type: `application/x.dash.dpp.identifier`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L389-L395) |\n| documents       | object         | Yes      | Document definitions (see [Documents](#data-contract-documents) for details)                                                                                                                                                                                                                             |\n| $defs           | object         | No       | Definitions for `$ref` references used in the `documents` object (if present, must be a non-empty object with \\<= 100 valid properties)                                                                                                                                                                  |\n\n## Data Contract Schema\n\nDetails regarding the data contract object may be found in the [rs-dpp data contract meta schema](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json). A truncated version is shown below for reference:\n\n```json\n{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://schema.dash.org/dpp-0-4-0/meta/data-contract\",\n  \"type\": \"object\",\n  \"$defs\": {\n    // Truncated ...\n  },\n  \"properties\": {\n    \"protocolVersion\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"$comment\": \"Maximum is the latest protocol version\"\n    },\n    \"$schema\": {\n      \"type\": \"string\",\n      \"const\": \"https://schema.dash.org/dpp-0-4-0/meta/data-contract\"\n    },\n    \"$id\": {\n      \"type\": \"array\",\n      \"byteArray\": true,\n      \"minItems\": 32,\n      \"maxItems\": 32,\n      \"contentMediaType\": \"application/x.dash.dpp.identifier\"\n    },\n    \"version\": {\n      \"type\": \"integer\",\n      \"minimum\": 1\n    },\n    \"ownerId\": {\n      \"type\": \"array\",\n      \"byteArray\": true,\n      \"minItems\": 32,\n      \"maxItems\": 32,\n      \"contentMediaType\": \"application/x.dash.dpp.identifier\"\n    },\n    \"documents\": {\n      \"type\": \"object\",\n      \"propertyNames\": {\n        \"pattern\": \"^[a-zA-Z0-9-_]{1,64}$\"\n      },\n      \"additionalProperties\": {\n        \"type\": \"object\",\n        \"allOf\": [\n          {\n            \"properties\": {\n              \"indices\": {\n                \"type\": \"array\",\n                \"items\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"name\": {\n                      \"type\": \"string\",\n                      \"minLength\": 1,\n                      \"maxLength\": 32\n                    },\n                    \"properties\": {\n                      \"type\": \"array\",\n                      \"items\": {\n                        \"type\": \"object\",\n                        \"propertyNames\": {\n                          \"maxLength\": 256\n                        },\n                        \"additionalProperties\": {\n                          \"type\": \"string\",\n                          \"enum\": [\n                            \"asc\"\n                          ]\n                        },\n                        \"minProperties\": 1,\n                        \"maxProperties\": 1\n                      },\n                      \"minItems\": 1,\n                      \"maxItems\": 10\n                    },\n                    \"unique\": {\n                      \"type\": \"boolean\"\n                    }\n                  },\n                  \"required\": [\n                    \"properties\",\n                    \"name\"\n                  ],\n                  \"additionalProperties\": false\n                },\n                \"minItems\": 1,\n                \"maxItems\": 10\n              },\n              \"type\": {\n                \"const\": \"object\"\n              },\n              \"signatureSecurityLevelRequirement\": {\n                \"type\": \"integer\",\n                \"enum\": [\n                  0,\n                  1,\n                  2,\n                  3\n                ],\n                \"description\": \"Public key security level. 0 - Master, 1 - Critical, 2 - High, 3 - Medium. If none specified, High level is used\"\n              }\n            }\n          },\n          {\n            \"$ref\": \"#/$defs/documentSchema\"\n          }\n        ],\n        \"unevaluatedProperties\": false\n      },\n      \"minProperties\": 1,\n      \"maxProperties\": 100\n    },\n    \"$defs\": {\n      \"$ref\": \"#/$defs/documentProperties\"\n    }\n  },\n  \"required\": [\n    \"protocolVersion\",\n    \"$schema\",\n    \"$id\",\n    \"version\",\n    \"ownerId\",\n    \"documents\"\n  ],\n  \"additionalProperties\": false\n}\n```\n\n**Example**\n\n```json\n{\n  \"id\": \"AoDzJxWSb1gUi2dSmvFeUFpSsjZQRJaqCpn7vCLkwwJj\",\n  \"ownerId\": \"7NUbPf231ixt1kVBQsBvSMMBxd7AgPad8KtdtfFGhXDP\",\n  \"schema\": \"https://schema.dash.org/dpp-0-4-0/meta/data-contract\",\n  \"documents\": {\n    \"note\": {\n      \"properties\": {\n        \"message\": {\n          \"type\": \"string\"\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n## Data Contract id\n\nThe data contract `$id` is a hash of the `ownerId` and entropy as shown [here](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/generate_data_contract.rs).\n\n```rust\n// From the Rust reference implementation (rs-dpp)\n// generate_data_contract.rs\n/// Generate data contract id based on owner id and entropy\npub fn generate_data_contract_id(owner_id: impl AsRef<[u8]>, entropy: impl AsRef<[u8]>) -> Vec<u8> {\n    let mut b: Vec<u8> = vec![];\n    let _ = b.write(owner_id.as_ref());\n    let _ = b.write(entropy.as_ref());\n    hash(b)\n}\n```\n\n## Data Contract version\n\nThe data contract `version` is an integer representing the current version of the contract. This  \nproperty must be incremented if the contract is updated.\n\n## Data Contract Documents\n\nThe `documents` object defines each type of document required by the data contract. At a minimum, a document must consist of 1 or more properties. Documents may also define [indices](#document-indices) and a list of [required properties](#required-properties-optional). The `additionalProperties` properties keyword must be included as described in the [constraints](#additional-properties) section.\n\nThe following example shows a minimal `documents` object defining a single document (`note`) that has one property (`message`).\n\n```json\n{\n  \"note\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"message\": {\n        \"type\": \"string\"\n      }\n    },\n    \"additionalProperties\": false\n  }\n}\n```\n\n### Document Properties\n\nThe `properties` object defines each field that will be used by a document. Each field consists of an object that, at a minimum, must define its data `type` (`string`, `number`, `integer`, `boolean`, `array`, `object`). Fields may also apply a variety of optional JSON Schema constraints related to the format, range, length, etc. of the data.\n\n**Note:** The `object` type is required to have properties defined either directly or via the data contract's [$defs](#data-contract-definitions).  For example, the body property shown below is an object containing a single string property (objectProperty):\n\n```javascript\nconst contractDocuments = {\n  message: {\n    \"type\": \"object\",\n    properties: {\n      body: {\n        type: \"object\",\n        properties: {\n          objectProperty: {\n            type: \"string\"\n          },\n        },\n        additionalProperties: false,\n      },\n      header: {\n        type: \"string\"\n      }\n    },\n    additionalProperties: false\n  }\n};\n```\n\n**Note:** A full explanation of the capabilities of JSON Schema is beyond the scope of this document. For more information regarding its data types and the constraints that can be applied, please refer to the [JSON Schema reference](https://json-schema.org/understanding-json-schema/reference/index.html) documentation.\n\n#### Property Constraints\n\nThere are a variety of constraints currently defined for performance and security reasons.\n\n| Description                  | Value                                                                                                                                                                |\n| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Minimum number of properties | [1](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L22)                                             |\n| Maximum number of properties | [100](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L23)                                           |\n| Minimum property name length | [1](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L20) (Note: minimum length was 3 prior to v0.23) |\n| Maximum property name length | [64](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L20)                                            |\n| Property name characters     | Alphanumeric (`A-Z`, `a-z`, `0-9`)<br>Hyphen (`-`) <br>Underscore (`_`)                                                                                              |\n\nPrior to Dash Platform v0.23 there were stricter limitations on minimum property name length and the characters that could be used in property names.\n\n#### Required Properties (Optional)\n\nEach document may have some fields that are required for the document to be valid and other fields that are optional. Required fields are defined via the `required` array which consists of a list of the field names from the document that must be present. The `required` object should be excluded for documents without any required properties.\n\n```json\n\"required\": [\n  \"<field name a>\",\n  \"<field name b>\"\n]\n```\n\n**Example**  \nThe following example (excerpt from the DPNS contract's `domain` document) demonstrates a document that has 6 required fields:\n\n```json\n\"required\": [\n  \"label\",\n  \"normalizedLabel\",\n  \"normalizedParentDomainName\",\n  \"preorderSalt\",\n  \"records\",\n  \"subdomainRules\"\n]\n```\n\n### Document Indices\n\nDocument indices may be defined if indexing on document fields is required.\n\n**Note:** Dash Platform v0.23 only allows [ascending default ordering](https://github.com/dashpay/platform/pull/435) for indices.\n\nThe `indices` array consists of:\n\n- One or more objects that each contain:\n  - A unique `name` for the index\n  - A `properties` array composed of a `<field name: sort order>` object for each document field that is part of the index (sort order: `asc` only for Dash Platform v0.23)\n  - An (optional) `unique` element that determines if duplicate values are allowed for the document type\n\n**Note:**\n\n- The `indices` object should be excluded for documents that do not require indices.\n- When defining an index with multiple properties (i.e a compound index), the order in which the properties are listed is important. Refer to the [mongoDB documentation](https://docs.mongodb.com/manual/core/index-compound/#prefixes) for details regarding the significance of the order as it relates to querying capabilities. Dash uses [GroveDB](https://github.com/dashevo/grovedb) which works similarly but does requiring listing _all_ the index's fields in query order by statements.\n\n```json\n\"indices\": [\n  {\n    \"name\": \"Index1\",\n    \"properties\": [\n      { \"<field name a>\": \"asc\" },\n      { \"<field name b>\": \"asc\" }\n    ],\n    \"unique\": true|false\n  },\n  {\n    \"name\": \"Index2\",\n    \"properties\": [\n      { \"<field name c>\": \"asc\" },\n    ],\n  }\n]\n```\n\n#### Index Constraints\n\nFor performance and security reasons, indices have the following constraints. These constraints are subject to change over time.\n\n| Description                                                                                                                                                        | Value                                                                                                                                                                                                                                                  |\n| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| Minimum/maximum length of index `name`                                                                                                                             | [1](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L413) / [32](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L414) |\n| Maximum number of indices                                                                                                                                          | [10](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L446)                                                                                                                             |\n| Maximum number of unique indices                                                                                                                                   | [3](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L40)                                                                                                                      |\n| Maximum number of properties in a single index                                                                                                                     | [10](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L433)                                                                                                                             |\n| Maximum length of indexed string property                                                                                                                          | [63](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L39)                                                                                                                     |\n| **Note: Dash Platform v0.22+. [does not allow indices for arrays](https://github.com/dashpay/platform/pull/225)**<br>Maximum length of indexed byte array property | [255](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L43)                                                                                                                    |\n| **Note: Dash Platform v0.22+. [does not allow indices for arrays](https://github.com/dashpay/platform/pull/225)**<br>Maximum number of indexed array items         | [1024](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L44)                                                                                                                   |\n| Usage of `$id` in an index [disallowed](https://github.com/dashpay/platform/pull/178)                                                                              | N/A                                                                                                                                                                                                                                                    |\n\n**Example**  \nThe following example (excerpt from the DPNS contract's `preorder` document) creates an index named `saltedHash` on the `saltedDomainHash` property that also enforces uniqueness across all documents of that type:\n\n```json\n\"indices\": [\n  {\n    \"name\": \"saltedHash\",\n    \"properties\": [\n      {\n        \"saltedDomainHash\": \"asc\"\n      }\n    ],\n    \"unique\": true\n  }\n]\n```\n\n### Full Document Syntax\n\nThis example syntax shows the structure of a documents object that defines two documents, an index, and a required field.\n\n```json\n{\n  \"<document name a>\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"<field name b>\": {\n        \"type\": \"<field data type>\"\n      },\n      \"<field name c>\": {\n        \"type\": \"<field data type>\"\n      },\n    },\n    \"indices\": [\n      {\n        \"name\": \"<index name>\",\n        \"properties\": [\n          {\n            \"<field name c>\": \"asc\"\n          }\n        ],\n        \"unique\": true|false\n      },\n    ],\n    \"required\": [\n      \"<field name c>\"\n    ]\n    \"additionalProperties\": false\n  },\n  \"<document name x>\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"<property name y>\": {\n        \"type\": \"<property data type>\"\n      },\n      \"<property name z>\": {\n        \"type\": \"<property data type>\"\n      },\n    },\n    \"additionalProperties\": false\n  },    \n}\n```\n\n### Document Schema\n\nFull document schema details may be found in this section of the [rs-dpp data contract meta schema](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L368-L471).\n\n## Data Contract Definitions\n\n> \u2757\ufe0f Definitions are currently unavailable\n\nThe optional `$defs` object enables definition of aspects of a schema that are used in multiple places. This is done using the JSON Schema support for [reuse](https://json-schema.org/understanding-json-schema/structuring.html#defs). Items defined in `$defs` may then be referenced when defining `documents` through use of the `$ref` keyword.\n\n**Note:**\n\n- Properties defined in the `$defs` object must meet the same criteria as those defined in the `documents` object (e.g. the `additionalProperties` properties keyword must be included as described in the [constraints](#additional-properties) section).\n- Data contracts can only use the `$ref` keyword to reference their own `$defs`. Referencing external definitions is not supported by the platform protocol.\n\n**Example**  \nThe following example shows a definition for a `message` object consisting of two properties:\n\n```json\n{\n  // Preceding content truncated ...\n  \"$defs\": {\n    \"message\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"timestamp\": {\n          \"type\": \"number\"\n        },\n        \"description\": {\n          \"type\": \"string\"\n        }\n      },\n      \"additionalProperties\": false\n    }\n  }\n}\n```\n\n# Data Contract State Transition Details\n\nThere are two data contract-related state transitions: [data contract create](#data-contract-creation) and [data contract update](#data-contract-update). Details are provided in this section.\n\n## Data Contract Creation\n\nData contracts are created on the platform by submitting the [data contract object](#data-contract-object) in a data contract create state transition consisting of:\n\n| Field                | Type                                          | Description                                                                                                                                           |\n| -------------------- | --------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |\n| protocolVersion      | integer                                       | The platform protocol version ([currently `1`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9))               |\n| type                 | integer                                       | State transition type (`0` for data contract create)                                                                                                  |\n| dataContract         | [data contract object](#data-contract-object) | Object containing the data contract details                                                                                                           |\n| entropy              | array of bytes                                | Entropy used to generate the data contract ID. Generated as [shown here](platform-protocol-reference-state-transition#entropy-generation). (32 bytes) |\n| signaturePublicKeyId | number                                        | The `id` of the [identity public key](platform-protocol-reference-identity#identity-publickeys) that signed the state transition                      |\n| signature            | array of bytes                                | Signature of state transition data (65 or 96 bytes)                                                                                                   |\n\nEach data contract state transition must comply with this JSON-Schema definition established in [rs-dpp](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/stateTransition/dataContractCreate.json):\n\n```json\n{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"protocolVersion\": {\n      \"type\": \"integer\",\n      \"$comment\": \"Maximum is the latest protocol version\"\n    },\n    \"type\": {\n      \"type\": \"integer\",\n      \"const\": 0\n    },\n    \"dataContract\": {\n      \"type\": \"object\"\n    },\n    \"entropy\": {\n      \"type\": \"array\",\n      \"byteArray\": true,\n      \"minItems\": 32,\n      \"maxItems\": 32\n    },\n    \"signaturePublicKeyId\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"signature\": {\n      \"type\": \"array\",\n      \"byteArray\": true,\n      \"minItems\": 65,\n      \"maxItems\": 96\n    }\n  },\n  \"additionalProperties\": false,\n  \"required\": [\n    \"protocolVersion\",\n    \"type\",\n    \"dataContract\",\n    \"entropy\",\n    \"signaturePublicKeyId\",\n    \"signature\"\n  ]\n}\n```\n\n**Example State Transition**\n\n```json\n{\n  \"protocolVersion\":1,\n  \"type\":0,\n  \"signature\":\"IFmEb/OwyYG0yn33U4/kieH4JL63Ft25GAun+XqWOalkbDrpL9z+OH+Sb03xsyMNzoILC2T1Q8yV1q7kCmr0HuQ=\",\n  \"signaturePublicKeyId\":0,\n  \"dataContract\":{\n    \"protocolVersion\":1,\n    \"$id\":\"44dvUnSdVtvPPeVy6mS4vRzJ4zfABCt33VvqTWMM8VG6\",\n    \"$schema\":\"https://schema.dash.org/dpp-0-4-0/meta/data-contract\",\n    \"version\":1,\n    \"ownerId\":\"6YfP6tT9AK8HPVXMK7CQrhpc8VMg7frjEnXinSPvUmZC\",\n    \"documents\":{\n      \"note\":{\n        \"type\":\"object\",\n        \"properties\":{\n          \"message\":{\n            \"type\":\"string\"\n          }\n        },\n        \"additionalProperties\":false\n      }\n    }\n  },\n  \"entropy\":\"J2Sl/Ka9T1paYUv6f2ec5MzaaACs9lcUvOskBU0SMlo=\"\n}\n```\n\n## Data Contract Update\n\nExisting data contracts can be updated in certain backwards-compatible ways. The following aspects  \nof a data contract can be updated:\n\n- Adding a new document\n- Adding a new optional property to an existing document\n- Adding non-unique indices for properties added in the update\n\nData contracts are updated on the platform by submitting the modified [data contract  \nobject](#data-contract-object) in a data contract update state transition consisting of:\n\n| Field                | Type                                          | Description                                                                                                                                                            |\n| -------------------- | --------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| protocolVersion      | integer                                       | The platform protocol version ([currently `1`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9))                                |\n| type                 | integer                                       | State transition type (`4` for data contract update)                                                                                                                   |\n| dataContract         | [data contract object](#data-contract-object) | Object containing the updated data contract details<br>**Note:** the data contract's [`version` property](#data-contract-version) must be incremented with each update |\n| signaturePublicKeyId | number                                        | The `id` of the [identity public key](platform-protocol-reference-identity#identity-publickeys) that signed the state transition                                       |\n| signature            | array of bytes                                | Signature of state transition data (65 or 96 bytes)                                                                                                                    |\n\nEach data contract state transition must comply with this JSON-Schema definition established in  \n[rs-dpp](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/stateTransition/dataContractUpdate.json):\n\n```json\n{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"protocolVersion\": {\n      \"type\": \"integer\",\n      \"$comment\": \"Maximum is the latest protocol version\"\n    },\n    \"type\": {\n      \"type\": \"integer\",\n      \"const\": 4\n    },\n    \"dataContract\": {\n      \"type\": \"object\"\n    },\n    \"signaturePublicKeyId\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"signature\": {\n      \"type\": \"array\",\n      \"byteArray\": true,\n      \"minItems\": 65,\n      \"maxItems\": 96\n    }\n  },\n  \"additionalProperties\": false,\n  \"required\": [\n    \"protocolVersion\",\n    \"type\",\n    \"dataContract\",\n    \"signaturePublicKeyId\",\n    \"signature\"\n  ]\n}\n```\n\n**Example State Transition**\n\n```json\n{\n  \"protocolVersion\":1,\n  \"type\":4,\n  \"signature\":\"IBboAbqbGBiWzyJDyhwzs1GujR6Gb4m5Gt/QCugLV2EYcsBaQKTM/Stq7iyIm2YyqkV8VlWqOfGebW2w5Pjnfak=\",\n  \"signaturePublicKeyId\":0,\n  \"dataContract\":{\n    \"protocolVersion\":1,\n    \"$id\":\"44dvUnSdVtvPPeVy6mS4vRzJ4zfABCt33VvqTWMM8VG6\",\n    \"$schema\":\"https://schema.dash.org/dpp-0-4-0/meta/data-contract\",\n    \"version\":2,\n    \"ownerId\":\"6YfP6tT9AK8HPVXMK7CQrhpc8VMg7frjEnXinSPvUmZC\",\n    \"documents\":{\n      \"note\":{\n        \"type\":\"object\",\n        \"properties\":{\n          \"message\":{\n            \"type\":\"string\"\n          },\n          \"author\":{\n            \"type\":\"string\"\n          }\n        },\n        \"additionalProperties\":false\n      }\n    }\n  }\n}\n```\n\n## Data Contract State Transition Signing\n\nData contract state transitions must be signed by a private key associated with the contract owner's identity.\n\nThe process to sign a data contract state transition consists of the following steps:\n\n1. Canonical CBOR encode the state transition data - this include all ST fields except the `signature` and `signaturePublicKeyId`\n2. Sign the encoded data with a private key associated with the `ownerId`\n3. Set the state transition `signature` to the value of the signature created in the previous step\n4. Set the state transition`signaturePublicKeyId` to the [public key `id`](platform-protocol-reference-identity#public-key-id) corresponding to the key used to sign",
 "order": 2,
 "isReference": false,
 "hidden": false,
 "sync_unique": "",
 "link_url": "",
 "link_external": false,
 "pendingAlgoliaPublish": false,
 "previousSlug": "reference-data-contract",
 "slugUpdatedAt": "2020-11-17T18:27:19.127Z",
 "createdAt": "2020-09-02T14:40:17.289Z",
 "updatedAt": "2023-08-15T20:30:21.645Z",
 "user": "5b8400d7185d5e00036dcc3b",
 "category": "64f8a9df750465004742ad73",
 "project": "5bda01cad172e200499a20a9",
 "version": "64f8a9df750465004742ae1d",
 "__v": 0,
 "parentDoc": null,
 "deprecated": false,
 "icon": "",
 "revision": 8,
 "isApi": false,
 "id": "64f8a9df750465004742adc0",
 "body_html": "<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-overview\"></div><div class=\"heading-text\"><div id=\"section-data-contract-overview\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Overview</div><a aria-label=\"Skip link to Data Contract Overview\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-overview\"></a></h1>\n<p>Data contracts define the schema (structure) of data an application will store on Dash Platform. Contracts are described using <a href=\"https://json-schema.org/understanding-json-schema/\" target=\"\" title=\"\">JSON Schema</a> which allows the platform to validate the contract-related data submitted to it.</p>\n<p>The following sections provide details that developers need to construct valid contracts: <a href=\"#data-contract-documents\" target=\"\" title=\"\">documents</a> and <a href=\"#data-contract-definitions\" target=\"\" title=\"\">definitions</a>. All data contracts must define one or more documents, whereas definitions are optional and may not be used for simple contracts.</p>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"general-constraints\"></div><div class=\"heading-text\"><div id=\"section-general-constraints\" class=\"heading-anchor_backwardsCompatibility\"></div>General Constraints</div><a aria-label=\"Skip link to General Constraints\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#general-constraints\"></a></h2>\n<p>There are a variety of constraints currently defined for performance and security reasons. The following constraints are applicable to all aspects of data contracts. Unless otherwise noted, these constraints are defined in the platform&#x27;s JSON Schema rules (e.g. <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json\" target=\"\" title=\"\">rs-dpp data contract meta schema</a>).</p>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"keyword\"></div><div class=\"heading-text\"><div id=\"section-keyword\" class=\"heading-anchor_backwardsCompatibility\"></div>Keyword</div><a aria-label=\"Skip link to Keyword\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#keyword\"></a></h3>\n<blockquote class=\"callout callout_warn\" theme=\"\ud83d\udea7\"><h2 class=\"callout-heading empty\"><span class=\"callout-icon\">\ud83d\udea7</span></h2><p>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref</code> keyword has been <a href=\"https://github.com/dashevo/platform/pull/300\" target=\"\" title=\"\">disabled</a> since Platform v0.22.</p></blockquote>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Keyword</th><th>Constraint</th></tr></thead><tbody><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">default</code></td><td>Restricted - cannot be used (defined in DPP logic)</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">propertyNames</code></td><td>Restricted - cannot be used (defined in DPP logic)</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">uniqueItems: true</code></td><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">maxItems</code> must be defined (maximum: 100000)</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">pattern: &lt;something&gt;</code></td><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">maxLength</code> must be defined (maximum: 50000)</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">format: &lt;something&gt;</code></td><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">maxLength</code> must be defined (maximum: 50000)</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref: &lt;something&gt;</code></td><td><strong>Temporarily disabled</strong><br/><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref</code> can only reference <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$defs</code> - <br/> remote references not supported</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">if</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">then</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">else</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">allOf</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">anyOf</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">oneOf</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">not</code></td><td>Disabled for data contracts</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">dependencies</code></td><td>Not supported. Use <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">dependentRequired</code> and <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">dependentSchema</code> instead</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">additionalItems</code></td><td>Not supported. Use <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">items: false</code> and <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">prefixItems</code> instead</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">patternProperties</code></td><td>Restricted - cannot be used for data contracts</td></tr><tr><td><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">pattern</code></td><td>Accept only <a href=\"https://github.com/google/re2/wiki/Syntax\" target=\"\" title=\"\">RE2</a> compatible regular expressions (defined in DPP logic)</td></tr></tbody></table></div></div>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-size\"></div><div class=\"heading-text\"><div id=\"section-data-size\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Size</div><a aria-label=\"Skip link to Data Size\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-size\"></a></h3>\n<p><strong>Note:</strong> These constraints are defined in the Dash Platform Protocol logic (not in JSON Schema).</p>\n<p>All serialized data (including state transitions) is limited to a maximum size of <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/util/serializer.rs#L8\" target=\"\" title=\"\">16 KB</a>.</p>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"additional-properties\"></div><div class=\"heading-text\"><div id=\"section-additional-properties\" class=\"heading-anchor_backwardsCompatibility\"></div>Additional Properties</div><a aria-label=\"Skip link to Additional Properties\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#additional-properties\"></a></h3>\n<p>Although JSON Schema allows additional, undefined properties <a href=\"https://json-schema.org/understanding-json-schema/reference/object.html?#properties\" target=\"\" title=\"\">by default</a>, they are not allowed in Dash Platform data contracts. Data contract validation will fail if they are not explicitly forbidden using the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">additionalProperties</code> keyword anywhere <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">properties</code> are defined (including within document properties of type <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">object</code>).</p>\n<p>Include the following at the same level as the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">properties</code> keyword to ensure proper validation:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">&quot;additionalProperties&quot;: false\n</code></pre></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-object\"></div><div class=\"heading-text\"><div id=\"section-data-contract-object\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Object</div><a aria-label=\"Skip link to Data Contract Object\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-object\"></a></h1>\n<p>The data contract object consists of the following fields as defined in the JavaScript reference client (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json\" target=\"\" title=\"\">rs-dpp</a>):</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>protocolVersion</td><td>integer</td><td>Yes</td><td>The platform protocol version (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9\" target=\"\" title=\"\">currently <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">1</code></a>)</td></tr><tr><td>$schema</td><td>string</td><td>Yes</td><td>A valid URL (default: <a href=\"https://schema.dash.org/dpp-0-4-0/meta/data-contract\" target=\"\" title=\"\">https://schema.dash.org/dpp-0-4-0/meta/data-contract</a>)</td></tr><tr><td>$id</td><td>array of bytes</td><td>Yes</td><td>Contract ID generated from <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">ownerId</code> and entropy (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L378-L384\" target=\"\" title=\"\">32 bytes; content media type: <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">application/x.dash.dpp.identifier</code></a>)</td></tr><tr><td>version</td><td>integer</td><td>Yes</td><td>The data contract version</td></tr><tr><td>ownerId</td><td>array of bytes</td><td>Yes</td><td><a href=\"platform-protocol-reference-identity\" target=\"\" title=\"\">Identity</a> that registered the data contract defining the document (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L389-L395\" target=\"\" title=\"\">32 bytes; content media type: <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">application/x.dash.dpp.identifier</code></a></td></tr><tr><td>documents</td><td>object</td><td>Yes</td><td>Document definitions (see <a href=\"#data-contract-documents\" target=\"\" title=\"\">Documents</a> for details)</td></tr><tr><td>$defs</td><td>object</td><td>No</td><td>Definitions for <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref</code> references used in the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">documents</code> object (if present, must be a non-empty object with &lt;= 100 valid properties)</td></tr></tbody></table></div></div>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-schema\"></div><div class=\"heading-text\"><div id=\"section-data-contract-schema\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Schema</div><a aria-label=\"Skip link to Data Contract Schema\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-schema\"></a></h2>\n<p>Details regarding the data contract object may be found in the <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json\" target=\"\" title=\"\">rs-dpp data contract meta schema</a>. A truncated version is shown below for reference:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;$id&quot;: &quot;https://schema.dash.org/dpp-0-4-0/meta/data-contract&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;$defs&quot;: {\n    // Truncated ...\n  },\n  &quot;properties&quot;: {\n    &quot;protocolVersion&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;minimum&quot;: 0,\n      &quot;$comment&quot;: &quot;Maximum is the latest protocol version&quot;\n    },\n    &quot;$schema&quot;: {\n      &quot;type&quot;: &quot;string&quot;,\n      &quot;const&quot;: &quot;https://schema.dash.org/dpp-0-4-0/meta/data-contract&quot;\n    },\n    &quot;$id&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;byteArray&quot;: true,\n      &quot;minItems&quot;: 32,\n      &quot;maxItems&quot;: 32,\n      &quot;contentMediaType&quot;: &quot;application/x.dash.dpp.identifier&quot;\n    },\n    &quot;version&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;minimum&quot;: 1\n    },\n    &quot;ownerId&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;byteArray&quot;: true,\n      &quot;minItems&quot;: 32,\n      &quot;maxItems&quot;: 32,\n      &quot;contentMediaType&quot;: &quot;application/x.dash.dpp.identifier&quot;\n    },\n    &quot;documents&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;propertyNames&quot;: {\n        &quot;pattern&quot;: &quot;^[a-zA-Z0-9-_]{1,64}$&quot;\n      },\n      &quot;additionalProperties&quot;: {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;allOf&quot;: [\n          {\n            &quot;properties&quot;: {\n              &quot;indices&quot;: {\n                &quot;type&quot;: &quot;array&quot;,\n                &quot;items&quot;: {\n                  &quot;type&quot;: &quot;object&quot;,\n                  &quot;properties&quot;: {\n                    &quot;name&quot;: {\n                      &quot;type&quot;: &quot;string&quot;,\n                      &quot;minLength&quot;: 1,\n                      &quot;maxLength&quot;: 32\n                    },\n                    &quot;properties&quot;: {\n                      &quot;type&quot;: &quot;array&quot;,\n                      &quot;items&quot;: {\n                        &quot;type&quot;: &quot;object&quot;,\n                        &quot;propertyNames&quot;: {\n                          &quot;maxLength&quot;: 256\n                        },\n                        &quot;additionalProperties&quot;: {\n                          &quot;type&quot;: &quot;string&quot;,\n                          &quot;enum&quot;: [\n                            &quot;asc&quot;\n                          ]\n                        },\n                        &quot;minProperties&quot;: 1,\n                        &quot;maxProperties&quot;: 1\n                      },\n                      &quot;minItems&quot;: 1,\n                      &quot;maxItems&quot;: 10\n                    },\n                    &quot;unique&quot;: {\n                      &quot;type&quot;: &quot;boolean&quot;\n                    }\n                  },\n                  &quot;required&quot;: [\n                    &quot;properties&quot;,\n                    &quot;name&quot;\n                  ],\n                  &quot;additionalProperties&quot;: false\n                },\n                &quot;minItems&quot;: 1,\n                &quot;maxItems&quot;: 10\n              },\n              &quot;type&quot;: {\n                &quot;const&quot;: &quot;object&quot;\n              },\n              &quot;signatureSecurityLevelRequirement&quot;: {\n                &quot;type&quot;: &quot;integer&quot;,\n                &quot;enum&quot;: [\n                  0,\n                  1,\n                  2,\n                  3\n                ],\n                &quot;description&quot;: &quot;Public key security level. 0 - Master, 1 - Critical, 2 - High, 3 - Medium. If none specified, High level is used&quot;\n              }\n            }\n          },\n          {\n            &quot;$ref&quot;: &quot;#/$defs/documentSchema&quot;\n          }\n        ],\n        &quot;unevaluatedProperties&quot;: false\n      },\n      &quot;minProperties&quot;: 1,\n      &quot;maxProperties&quot;: 100\n    },\n    &quot;$defs&quot;: {\n      &quot;$ref&quot;: &quot;#/$defs/documentProperties&quot;\n    }\n  },\n  &quot;required&quot;: [\n    &quot;protocolVersion&quot;,\n    &quot;$schema&quot;,\n    &quot;$id&quot;,\n    &quot;version&quot;,\n    &quot;ownerId&quot;,\n    &quot;documents&quot;\n  ],\n  &quot;additionalProperties&quot;: false\n}\n</code></pre></div></div>\n<p><strong>Example</strong></p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;id&quot;: &quot;AoDzJxWSb1gUi2dSmvFeUFpSsjZQRJaqCpn7vCLkwwJj&quot;,\n  &quot;ownerId&quot;: &quot;7NUbPf231ixt1kVBQsBvSMMBxd7AgPad8KtdtfFGhXDP&quot;,\n  &quot;schema&quot;: &quot;https://schema.dash.org/dpp-0-4-0/meta/data-contract&quot;,\n  &quot;documents&quot;: {\n    &quot;note&quot;: {\n      &quot;properties&quot;: {\n        &quot;message&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      },\n      &quot;additionalProperties&quot;: false\n    }\n  }\n}\n</code></pre></div></div>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-id\"></div><div class=\"heading-text\"><div id=\"section-data-contract-id\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract id</div><a aria-label=\"Skip link to Data Contract id\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-id\"></a></h2>\n<p>The data contract <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$id</code> is a hash of the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">ownerId</code> and entropy as shown <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/generate_data_contract.rs\" target=\"\" title=\"\">here</a>.</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">Rust</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-rust theme-light\" data-lang=\"rust\" name=\"\" tabindex=\"0\">// From the Rust reference implementation (rs-dpp)\n// generate_data_contract.rs\n/// Generate data contract id based on owner id and entropy\npub fn generate_data_contract_id(owner_id: impl AsRef&lt;[u8]&gt;, entropy: impl AsRef&lt;[u8]&gt;) -&gt; Vec&lt;u8&gt; {\n    let mut b: Vec&lt;u8&gt; = vec![];\n    let _ = b.write(owner_id.as_ref());\n    let _ = b.write(entropy.as_ref());\n    hash(b)\n}\n</code></pre></div></div>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-version\"></div><div class=\"heading-text\"><div id=\"section-data-contract-version\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract version</div><a aria-label=\"Skip link to Data Contract version\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-version\"></a></h2>\n<p>The data contract <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">version</code> is an integer representing the current version of the contract. This<br/>\nproperty must be incremented if the contract is updated.</p>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-documents\"></div><div class=\"heading-text\"><div id=\"section-data-contract-documents\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Documents</div><a aria-label=\"Skip link to Data Contract Documents\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-documents\"></a></h2>\n<p>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">documents</code> object defines each type of document required by the data contract. At a minimum, a document must consist of 1 or more properties. Documents may also define <a href=\"#document-indices\" target=\"\" title=\"\">indices</a> and a list of <a href=\"#required-properties-optional\" target=\"\" title=\"\">required properties</a>. The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">additionalProperties</code> properties keyword must be included as described in the <a href=\"#additional-properties\" target=\"\" title=\"\">constraints</a> section.</p>\n<p>The following example shows a minimal <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">documents</code> object defining a single document (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">note</code>) that has one property (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">message</code>).</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;note&quot;: {\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n      &quot;message&quot;: {\n        &quot;type&quot;: &quot;string&quot;\n      }\n    },\n    &quot;additionalProperties&quot;: false\n  }\n}\n</code></pre></div></div>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"document-properties\"></div><div class=\"heading-text\"><div id=\"section-document-properties\" class=\"heading-anchor_backwardsCompatibility\"></div>Document Properties</div><a aria-label=\"Skip link to Document Properties\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#document-properties\"></a></h3>\n<p>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">properties</code> object defines each field that will be used by a document. Each field consists of an object that, at a minimum, must define its data <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">type</code> (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">string</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">number</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">integer</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">boolean</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">array</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">object</code>). Fields may also apply a variety of optional JSON Schema constraints related to the format, range, length, etc. of the data.</p>\n<p><strong>Note:</strong> The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">object</code> type is required to have properties defined either directly or via the data contract&#x27;s <a href=\"#data-contract-definitions\" target=\"\" title=\"\">$defs</a>.  For example, the body property shown below is an object containing a single string property (objectProperty):</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JavaScript</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-javascript theme-light\" data-lang=\"javascript\" name=\"\" tabindex=\"0\">const contractDocuments = {\n  message: {\n    &quot;type&quot;: &quot;object&quot;,\n    properties: {\n      body: {\n        type: &quot;object&quot;,\n        properties: {\n          objectProperty: {\n            type: &quot;string&quot;\n          },\n        },\n        additionalProperties: false,\n      },\n      header: {\n        type: &quot;string&quot;\n      }\n    },\n    additionalProperties: false\n  }\n};\n</code></pre></div></div>\n<p><strong>Note:</strong> A full explanation of the capabilities of JSON Schema is beyond the scope of this document. For more information regarding its data types and the constraints that can be applied, please refer to the <a href=\"https://json-schema.org/understanding-json-schema/reference/index.html\" target=\"\" title=\"\">JSON Schema reference</a> documentation.</p>\n<h4 class=\"heading heading-4 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"property-constraints\"></div><div class=\"heading-text\"><div id=\"section-property-constraints\" class=\"heading-anchor_backwardsCompatibility\"></div>Property Constraints</div><a aria-label=\"Skip link to Property Constraints\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#property-constraints\"></a></h4>\n<p>There are a variety of constraints currently defined for performance and security reasons.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Description</th><th>Value</th></tr></thead><tbody><tr><td>Minimum number of properties</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L22\" target=\"\" title=\"\">1</a></td></tr><tr><td>Maximum number of properties</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L23\" target=\"\" title=\"\">100</a></td></tr><tr><td>Minimum property name length</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L20\" target=\"\" title=\"\">1</a> (Note: minimum length was 3 prior to v0.23)</td></tr><tr><td>Maximum property name length</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L20\" target=\"\" title=\"\">64</a></td></tr><tr><td>Property name characters</td><td>Alphanumeric (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">A-Z</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">a-z</code>, <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">0-9</code>)<br/>Hyphen (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">-</code>) <br/>Underscore (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">_</code>)</td></tr></tbody></table></div></div>\n<p>Prior to Dash Platform v0.23 there were stricter limitations on minimum property name length and the characters that could be used in property names.</p>\n<h4 class=\"heading heading-4 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"required-properties-optional\"></div><div class=\"heading-text\"><div id=\"section-required-properties-optional\" class=\"heading-anchor_backwardsCompatibility\"></div>Required Properties (Optional)</div><a aria-label=\"Skip link to Required Properties (Optional)\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#required-properties-optional\"></a></h4>\n<p>Each document may have some fields that are required for the document to be valid and other fields that are optional. Required fields are defined via the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">required</code> array which consists of a list of the field names from the document that must be present. The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">required</code> object should be excluded for documents without any required properties.</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">&quot;required&quot;: [\n  &quot;&lt;field name a&gt;&quot;,\n  &quot;&lt;field name b&gt;&quot;\n]\n</code></pre></div></div>\n<p><strong>Example</strong><br/>\nThe following example (excerpt from the DPNS contract&#x27;s <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">domain</code> document) demonstrates a document that has 6 required fields:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">&quot;required&quot;: [\n  &quot;label&quot;,\n  &quot;normalizedLabel&quot;,\n  &quot;normalizedParentDomainName&quot;,\n  &quot;preorderSalt&quot;,\n  &quot;records&quot;,\n  &quot;subdomainRules&quot;\n]\n</code></pre></div></div>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"document-indices\"></div><div class=\"heading-text\"><div id=\"section-document-indices\" class=\"heading-anchor_backwardsCompatibility\"></div>Document Indices</div><a aria-label=\"Skip link to Document Indices\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#document-indices\"></a></h3>\n<p>Document indices may be defined if indexing on document fields is required.</p>\n<p><strong>Note:</strong> Dash Platform v0.23 only allows <a href=\"https://github.com/dashpay/platform/pull/435\" target=\"\" title=\"\">ascending default ordering</a> for indices.</p>\n<p>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">indices</code> array consists of:</p>\n<ul>\n<li>One or more objects that each contain:\n<ul>\n<li>A unique <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">name</code> for the index</li>\n<li>A <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">properties</code> array composed of a <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">&lt;field name: sort order&gt;</code> object for each document field that is part of the index (sort order: <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">asc</code> only for Dash Platform v0.23)</li>\n<li>An (optional) <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">unique</code> element that determines if duplicate values are allowed for the document type</li>\n</ul>\n</li>\n</ul>\n<p><strong>Note:</strong></p>\n<ul>\n<li>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">indices</code> object should be excluded for documents that do not require indices.</li>\n<li>When defining an index with multiple properties (i.e a compound index), the order in which the properties are listed is important. Refer to the <a href=\"https://docs.mongodb.com/manual/core/index-compound/#prefixes\" target=\"\" title=\"\">mongoDB documentation</a> for details regarding the significance of the order as it relates to querying capabilities. Dash uses <a href=\"https://github.com/dashevo/grovedb\" target=\"\" title=\"\">GroveDB</a> which works similarly but does requiring listing <em>all</em> the index&#x27;s fields in query order by statements.</li>\n</ul>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">&quot;indices&quot;: [\n  {\n    &quot;name&quot;: &quot;Index1&quot;,\n    &quot;properties&quot;: [\n      { &quot;&lt;field name a&gt;&quot;: &quot;asc&quot; },\n      { &quot;&lt;field name b&gt;&quot;: &quot;asc&quot; }\n    ],\n    &quot;unique&quot;: true|false\n  },\n  {\n    &quot;name&quot;: &quot;Index2&quot;,\n    &quot;properties&quot;: [\n      { &quot;&lt;field name c&gt;&quot;: &quot;asc&quot; },\n    ],\n  }\n]\n</code></pre></div></div>\n<h4 class=\"heading heading-4 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"index-constraints\"></div><div class=\"heading-text\"><div id=\"section-index-constraints\" class=\"heading-anchor_backwardsCompatibility\"></div>Index Constraints</div><a aria-label=\"Skip link to Index Constraints\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#index-constraints\"></a></h4>\n<p>For performance and security reasons, indices have the following constraints. These constraints are subject to change over time.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Description</th><th>Value</th></tr></thead><tbody><tr><td>Minimum/maximum length of index <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">name</code></td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L413\" target=\"\" title=\"\">1</a> / <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L414\" target=\"\" title=\"\">32</a></td></tr><tr><td>Maximum number of indices</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L446\" target=\"\" title=\"\">10</a></td></tr><tr><td>Maximum number of unique indices</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L40\" target=\"\" title=\"\">3</a></td></tr><tr><td>Maximum number of properties in a single index</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L433\" target=\"\" title=\"\">10</a></td></tr><tr><td>Maximum length of indexed string property</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L39\" target=\"\" title=\"\">63</a></td></tr><tr><td><strong>Note: Dash Platform v0.22+. <a href=\"https://github.com/dashpay/platform/pull/225\" target=\"\" title=\"\">does not allow indices for arrays</a></strong><br/>Maximum length of indexed byte array property</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L43\" target=\"\" title=\"\">255</a></td></tr><tr><td><strong>Note: Dash Platform v0.22+. <a href=\"https://github.com/dashpay/platform/pull/225\" target=\"\" title=\"\">does not allow indices for arrays</a></strong><br/>Maximum number of indexed array items</td><td><a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_contract/validation/data_contract_validator.rs#L44\" target=\"\" title=\"\">1024</a></td></tr><tr><td>Usage of <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$id</code> in an index <a href=\"https://github.com/dashpay/platform/pull/178\" target=\"\" title=\"\">disallowed</a></td><td>N/A</td></tr></tbody></table></div></div>\n<p><strong>Example</strong><br/>\nThe following example (excerpt from the DPNS contract&#x27;s <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">preorder</code> document) creates an index named <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">saltedHash</code> on the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">saltedDomainHash</code> property that also enforces uniqueness across all documents of that type:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">&quot;indices&quot;: [\n  {\n    &quot;name&quot;: &quot;saltedHash&quot;,\n    &quot;properties&quot;: [\n      {\n        &quot;saltedDomainHash&quot;: &quot;asc&quot;\n      }\n    ],\n    &quot;unique&quot;: true\n  }\n]\n</code></pre></div></div>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"full-document-syntax\"></div><div class=\"heading-text\"><div id=\"section-full-document-syntax\" class=\"heading-anchor_backwardsCompatibility\"></div>Full Document Syntax</div><a aria-label=\"Skip link to Full Document Syntax\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#full-document-syntax\"></a></h3>\n<p>This example syntax shows the structure of a documents object that defines two documents, an index, and a required field.</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;&lt;document name a&gt;&quot;: {\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n      &quot;&lt;field name b&gt;&quot;: {\n        &quot;type&quot;: &quot;&lt;field data type&gt;&quot;\n      },\n      &quot;&lt;field name c&gt;&quot;: {\n        &quot;type&quot;: &quot;&lt;field data type&gt;&quot;\n      },\n    },\n    &quot;indices&quot;: [\n      {\n        &quot;name&quot;: &quot;&lt;index name&gt;&quot;,\n        &quot;properties&quot;: [\n          {\n            &quot;&lt;field name c&gt;&quot;: &quot;asc&quot;\n          }\n        ],\n        &quot;unique&quot;: true|false\n      },\n    ],\n    &quot;required&quot;: [\n      &quot;&lt;field name c&gt;&quot;\n    ]\n    &quot;additionalProperties&quot;: false\n  },\n  &quot;&lt;document name x&gt;&quot;: {\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n      &quot;&lt;property name y&gt;&quot;: {\n        &quot;type&quot;: &quot;&lt;property data type&gt;&quot;\n      },\n      &quot;&lt;property name z&gt;&quot;: {\n        &quot;type&quot;: &quot;&lt;property data type&gt;&quot;\n      },\n    },\n    &quot;additionalProperties&quot;: false\n  },    \n}\n</code></pre></div></div>\n<h3 class=\"heading heading-3 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"document-schema\"></div><div class=\"heading-text\"><div id=\"section-document-schema\" class=\"heading-anchor_backwardsCompatibility\"></div>Document Schema</div><a aria-label=\"Skip link to Document Schema\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#document-schema\"></a></h3>\n<p>Full document schema details may be found in this section of the <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/dataContractMeta.json#L368-L471\" target=\"\" title=\"\">rs-dpp data contract meta schema</a>.</p>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-definitions\"></div><div class=\"heading-text\"><div id=\"section-data-contract-definitions\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Definitions</div><a aria-label=\"Skip link to Data Contract Definitions\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-definitions\"></a></h2>\n<blockquote class=\"callout callout_error\" theme=\"\u2757\ufe0f\"><h2 class=\"callout-heading\"><span class=\"callout-icon\">\u2757\ufe0f</span><p>Definitions are currently unavailable</p></h2></blockquote>\n<p>The optional <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$defs</code> object enables definition of aspects of a schema that are used in multiple places. This is done using the JSON Schema support for <a href=\"https://json-schema.org/understanding-json-schema/structuring.html#defs\" target=\"\" title=\"\">reuse</a>. Items defined in <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$defs</code> may then be referenced when defining <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">documents</code> through use of the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref</code> keyword.</p>\n<p><strong>Note:</strong></p>\n<ul>\n<li>Properties defined in the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$defs</code> object must meet the same criteria as those defined in the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">documents</code> object (e.g. the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">additionalProperties</code> properties keyword must be included as described in the <a href=\"#additional-properties\" target=\"\" title=\"\">constraints</a> section).</li>\n<li>Data contracts can only use the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$ref</code> keyword to reference their own <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">$defs</code>. Referencing external definitions is not supported by the platform protocol.</li>\n</ul>\n<p><strong>Example</strong><br/>\nThe following example shows a definition for a <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">message</code> object consisting of two properties:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  // Preceding content truncated ...\n  &quot;$defs&quot;: {\n    &quot;message&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;timestamp&quot;: {\n          &quot;type&quot;: &quot;number&quot;\n        },\n        &quot;description&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      },\n      &quot;additionalProperties&quot;: false\n    }\n  }\n}\n</code></pre></div></div>\n<h1 class=\"heading heading-1 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-state-transition-details\"></div><div class=\"heading-text\"><div id=\"section-data-contract-state-transition-details\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract State Transition Details</div><a aria-label=\"Skip link to Data Contract State Transition Details\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-state-transition-details\"></a></h1>\n<p>There are two data contract-related state transitions: <a href=\"#data-contract-creation\" target=\"\" title=\"\">data contract create</a> and <a href=\"#data-contract-update\" target=\"\" title=\"\">data contract update</a>. Details are provided in this section.</p>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-creation\"></div><div class=\"heading-text\"><div id=\"section-data-contract-creation\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Creation</div><a aria-label=\"Skip link to Data Contract Creation\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-creation\"></a></h2>\n<p>Data contracts are created on the platform by submitting the <a href=\"#data-contract-object\" target=\"\" title=\"\">data contract object</a> in a data contract create state transition consisting of:</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>protocolVersion</td><td>integer</td><td>The platform protocol version (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9\" target=\"\" title=\"\">currently <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">1</code></a>)</td></tr><tr><td>type</td><td>integer</td><td>State transition type (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">0</code> for data contract create)</td></tr><tr><td>dataContract</td><td><a href=\"#data-contract-object\" target=\"\" title=\"\">data contract object</a></td><td>Object containing the data contract details</td></tr><tr><td>entropy</td><td>array of bytes</td><td>Entropy used to generate the data contract ID. Generated as <a href=\"platform-protocol-reference-state-transition#entropy-generation\" target=\"\" title=\"\">shown here</a>. (32 bytes)</td></tr><tr><td>signaturePublicKeyId</td><td>number</td><td>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">id</code> of the <a href=\"platform-protocol-reference-identity#identity-publickeys\" target=\"\" title=\"\">identity public key</a> that signed the state transition</td></tr><tr><td>signature</td><td>array of bytes</td><td>Signature of state transition data (65 or 96 bytes)</td></tr></tbody></table></div></div>\n<p>Each data contract state transition must comply with this JSON-Schema definition established in <a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/stateTransition/dataContractCreate.json\" target=\"\" title=\"\">rs-dpp</a>:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: {\n    &quot;protocolVersion&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;$comment&quot;: &quot;Maximum is the latest protocol version&quot;\n    },\n    &quot;type&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;const&quot;: 0\n    },\n    &quot;dataContract&quot;: {\n      &quot;type&quot;: &quot;object&quot;\n    },\n    &quot;entropy&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;byteArray&quot;: true,\n      &quot;minItems&quot;: 32,\n      &quot;maxItems&quot;: 32\n    },\n    &quot;signaturePublicKeyId&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;minimum&quot;: 0\n    },\n    &quot;signature&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;byteArray&quot;: true,\n      &quot;minItems&quot;: 65,\n      &quot;maxItems&quot;: 96\n    }\n  },\n  &quot;additionalProperties&quot;: false,\n  &quot;required&quot;: [\n    &quot;protocolVersion&quot;,\n    &quot;type&quot;,\n    &quot;dataContract&quot;,\n    &quot;entropy&quot;,\n    &quot;signaturePublicKeyId&quot;,\n    &quot;signature&quot;\n  ]\n}\n</code></pre></div></div>\n<p><strong>Example State Transition</strong></p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;protocolVersion&quot;:1,\n  &quot;type&quot;:0,\n  &quot;signature&quot;:&quot;IFmEb/OwyYG0yn33U4/kieH4JL63Ft25GAun+XqWOalkbDrpL9z+OH+Sb03xsyMNzoILC2T1Q8yV1q7kCmr0HuQ=&quot;,\n  &quot;signaturePublicKeyId&quot;:0,\n  &quot;dataContract&quot;:{\n    &quot;protocolVersion&quot;:1,\n    &quot;$id&quot;:&quot;44dvUnSdVtvPPeVy6mS4vRzJ4zfABCt33VvqTWMM8VG6&quot;,\n    &quot;$schema&quot;:&quot;https://schema.dash.org/dpp-0-4-0/meta/data-contract&quot;,\n    &quot;version&quot;:1,\n    &quot;ownerId&quot;:&quot;6YfP6tT9AK8HPVXMK7CQrhpc8VMg7frjEnXinSPvUmZC&quot;,\n    &quot;documents&quot;:{\n      &quot;note&quot;:{\n        &quot;type&quot;:&quot;object&quot;,\n        &quot;properties&quot;:{\n          &quot;message&quot;:{\n            &quot;type&quot;:&quot;string&quot;\n          }\n        },\n        &quot;additionalProperties&quot;:false\n      }\n    }\n  },\n  &quot;entropy&quot;:&quot;J2Sl/Ka9T1paYUv6f2ec5MzaaACs9lcUvOskBU0SMlo=&quot;\n}\n</code></pre></div></div>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-update\"></div><div class=\"heading-text\"><div id=\"section-data-contract-update\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract Update</div><a aria-label=\"Skip link to Data Contract Update\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-update\"></a></h2>\n<p>Existing data contracts can be updated in certain backwards-compatible ways. The following aspects<br/>\nof a data contract can be updated:</p>\n<ul>\n<li>Adding a new document</li>\n<li>Adding a new optional property to an existing document</li>\n<li>Adding non-unique indices for properties added in the update</li>\n</ul>\n<p>Data contracts are updated on the platform by submitting the modified <a href=\"#data-contract-object\" target=\"\" title=\"\">data contract<br/>\nobject</a> in a data contract update state transition consisting of:</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div class=\"rdmd-table\"><div class=\"rdmd-table-inner\"><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>protocolVersion</td><td>integer</td><td>The platform protocol version (<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/version/mod.rs#L9\" target=\"\" title=\"\">currently <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">1</code></a>)</td></tr><tr><td>type</td><td>integer</td><td>State transition type (<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">4</code> for data contract update)</td></tr><tr><td>dataContract</td><td><a href=\"#data-contract-object\" target=\"\" title=\"\">data contract object</a></td><td>Object containing the updated data contract details<br/><strong>Note:</strong> the data contract&#x27;s <a href=\"#data-contract-version\" target=\"\" title=\"\"><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">version</code> property</a> must be incremented with each update</td></tr><tr><td>signaturePublicKeyId</td><td>number</td><td>The <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">id</code> of the <a href=\"platform-protocol-reference-identity#identity-publickeys\" target=\"\" title=\"\">identity public key</a> that signed the state transition</td></tr><tr><td>signature</td><td>array of bytes</td><td>Signature of state transition data (65 or 96 bytes)</td></tr></tbody></table></div></div>\n<p>Each data contract state transition must comply with this JSON-Schema definition established in<br/>\n<a href=\"https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/schema/data_contract/stateTransition/dataContractUpdate.json\" target=\"\" title=\"\">rs-dpp</a>:</p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: {\n    &quot;protocolVersion&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;$comment&quot;: &quot;Maximum is the latest protocol version&quot;\n    },\n    &quot;type&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;const&quot;: 4\n    },\n    &quot;dataContract&quot;: {\n      &quot;type&quot;: &quot;object&quot;\n    },\n    &quot;signaturePublicKeyId&quot;: {\n      &quot;type&quot;: &quot;integer&quot;,\n      &quot;minimum&quot;: 0\n    },\n    &quot;signature&quot;: {\n      &quot;type&quot;: &quot;array&quot;,\n      &quot;byteArray&quot;: true,\n      &quot;minItems&quot;: 65,\n      &quot;maxItems&quot;: 96\n    }\n  },\n  &quot;additionalProperties&quot;: false,\n  &quot;required&quot;: [\n    &quot;protocolVersion&quot;,\n    &quot;type&quot;,\n    &quot;dataContract&quot;,\n    &quot;signaturePublicKeyId&quot;,\n    &quot;signature&quot;\n  ]\n}\n</code></pre></div></div>\n<p><strong>Example State Transition</strong></p>\n<div class=\"CodeTabs CodeTabs_initial theme-light\"><div class=\"CodeTabs-toolbar\" role=\"tablist\"><button aria-selected=\"true\" class=\"CodeTabs_active\" role=\"tab\" type=\"button\">JSON</button></div><div class=\"CodeTabs-inner\" role=\"tabpanel\"><pre><button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang-json theme-light\" data-lang=\"json\" name=\"\" tabindex=\"0\">{\n  &quot;protocolVersion&quot;:1,\n  &quot;type&quot;:4,\n  &quot;signature&quot;:&quot;IBboAbqbGBiWzyJDyhwzs1GujR6Gb4m5Gt/QCugLV2EYcsBaQKTM/Stq7iyIm2YyqkV8VlWqOfGebW2w5Pjnfak=&quot;,\n  &quot;signaturePublicKeyId&quot;:0,\n  &quot;dataContract&quot;:{\n    &quot;protocolVersion&quot;:1,\n    &quot;$id&quot;:&quot;44dvUnSdVtvPPeVy6mS4vRzJ4zfABCt33VvqTWMM8VG6&quot;,\n    &quot;$schema&quot;:&quot;https://schema.dash.org/dpp-0-4-0/meta/data-contract&quot;,\n    &quot;version&quot;:2,\n    &quot;ownerId&quot;:&quot;6YfP6tT9AK8HPVXMK7CQrhpc8VMg7frjEnXinSPvUmZC&quot;,\n    &quot;documents&quot;:{\n      &quot;note&quot;:{\n        &quot;type&quot;:&quot;object&quot;,\n        &quot;properties&quot;:{\n          &quot;message&quot;:{\n            &quot;type&quot;:&quot;string&quot;\n          },\n          &quot;author&quot;:{\n            &quot;type&quot;:&quot;string&quot;\n          }\n        },\n        &quot;additionalProperties&quot;:false\n      }\n    }\n  }\n}\n</code></pre></div></div>\n<h2 class=\"heading heading-2 header-scroll\" align=\"\"><div class=\"heading-anchor anchor waypoint\" id=\"data-contract-state-transition-signing\"></div><div class=\"heading-text\"><div id=\"section-data-contract-state-transition-signing\" class=\"heading-anchor_backwardsCompatibility\"></div>Data Contract State Transition Signing</div><a aria-label=\"Skip link to Data Contract State Transition Signing\" class=\"heading-anchor-icon fa fa-anchor\" href=\"#data-contract-state-transition-signing\"></a></h2>\n<p>Data contract state transitions must be signed by a private key associated with the contract owner&#x27;s identity.</p>\n<p>The process to sign a data contract state transition consists of the following steps:</p>\n<ol>\n<li>Canonical CBOR encode the state transition data - this include all ST fields except the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">signature</code> and <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">signaturePublicKeyId</code></li>\n<li>Sign the encoded data with a private key associated with the <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">ownerId</code></li>\n<li>Set the state transition <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">signature</code> to the value of the signature created in the previous step</li>\n<li>Set the state transition<button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">signaturePublicKeyId</code> to the <a href=\"platform-protocol-reference-identity#public-key-id\" target=\"\" title=\"\">public key <button aria-label=\"Copy Code\" class=\"rdmd-code-copy fa\"></button><code class=\"rdmd-code lang- theme-light\" data-lang=\"\" name=\"\" tabindex=\"0\">id</code></a> corresponding to the key used to sign</li>\n</ol>"
}