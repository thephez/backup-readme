{
 "metadata": {
  "image": [],
  "title": "",
  "description": "",
  "keywords": "",
  "robots": "index"
 },
 "api": {
  "method": "get",
  "url": "",
  "auth": "required",
  "results": {
   "codes": [
    {
     "name": "",
     "code": "{}",
     "language": "json",
     "status": 200
    },
    {
     "name": "",
     "code": "{}",
     "language": "json",
     "status": 400
    }
   ]
  },
  "params": []
 },
 "next": {
  "description": "",
  "pages": []
 },
 "algolia": {
  "recordCount": 3,
  "publishPending": false,
  "translationFailure": false,
  "updatedAt": "2023-09-06T16:36:43.137Z"
 },
 "title": "Data Trigger",
 "icon": "",
 "updates": [],
 "type": "basic",
 "slug": "platform-protocol-reference-data-trigger",
 "excerpt": "",
 "body": "# Data Trigger Overview\n\nAlthough [data contracts](platform-protocol-reference-data-contract) provide much needed constraints on the structure of the data being stored on Dash Platform, there are limits to what they can do. Certain system data contracts may require server-side validation logic to operate effectively. For example, [DPNS](https://dashplatform.readme.io/docs/explanation-dpns) must enforce some rules to ensure names remain DNS compatible. Dash Platform Protocol (DPP) supports this application-specific custom logic using Data Triggers.\n\n# Details\n\nSince all application data is submitted in the form of documents, data triggers are defined in the context of documents. To provide even more granularity, they also incorporate the [document transition action](platform-protocol-reference-document#document-transition-action) so separate triggers can be created for the CREATE, REPLACE, or DELETE actions.\n\nWhen document state transitions are received, DPP checks if there is a trigger associated with the document transition type and action. If there is, it then executes the trigger logic.\n\n**Note:** Successful execution of the trigger logic is necessary for the document to be accepted and applied to the platform state.\n\n## Example\n\nAs an example, DPP contains several data triggers for DPNS as defined in the [data triggers factory](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/get_data_triggers_factory.rs). The `domain` document has added constraints for creation. All DPNS document types have constraints on replacing or deleting:\n\n| Data Contract | Document           | Action(s)                                                                                                                            | Trigger Description                                                                                      |\n| ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------- |\n| DPNS          | `domain`           | [`CREATE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/lib/dataTrigger/dpnsTriggers/createDomainDataTrigger.js) | Enforces DNS compatibility, validates provided hashes, and restricts top-level domain (TLD) registration |\n| ----          | ----               | ----                                                                                                                                 | ----                                                                                                     |\n| DPNS          | All Document Types | [`REPLACE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/reject_data_trigger.rs)                | Prevents updates to existing documents                                                                   |\n| DPNS          | All Document Types | [`DELETE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/reject_data_trigger.rs)                 | Prevents deletion of existing documents                                                                  |\n\n**DPNS Trigger Constraints**\n\nThe following table details the DPNS constraints applied via data triggers. These constraints are in addition to the ones applied directly by the DPNS data contract.\n\n| Document   | Action    | Constraint                                                                                                  |\n| ---------- | --------- | ----------------------------------------------------------------------------------------------------------- |\n| `domain`   | `CREATE`  | Full domain length \\<= 253 characters                                                                       |\n| `domain`   | `CREATE`  | `normalizedLabel` matches lowercase `label`                                                                 |\n| `domain`   | `CREATE`  | `ownerId` matches `records.dashUniqueIdentityId` or `dashAliasIdentityId` (whichever one is present)        |\n| `domain`   | `CREATE`  | Only creating a top-level domain with an authorized identity                                                |\n| `domain`   | `CREATE`  | Referenced `normalizedParentDomainName` must be an existing parent domain                                   |\n| `domain`   | `CREATE`  | Subdomain registration for non top level domains prevented if `subdomainRules.allowSubdomains` is true      |\n| `domain`   | `CREATE`  | Subdomain registration only allowed by the parent domain owner if `subdomainRules.allowSubdomains` is false |\n| `domain`   | `CREATE`  | Referenced `preorder` document must exist                                                                   |\n| `domain`   | `REPLACE` | Action not allowed                                                                                          |\n| `domain`   | `DELETE`  | Action not allowed                                                                                          |\n| `preorder` | `REPLACE` | Action not allowed                                                                                          |\n| `preorder` | `DELETE`  | Action not allowed                                                                                          |",
 "order": 5,
 "isReference": false,
 "deprecated": false,
 "hidden": false,
 "sync_unique": "",
 "link_url": "",
 "link_external": false,
 "reusableContent": [],
 "previousSlug": "reference-data-trigger",
 "slugUpdatedAt": "2020-11-17T18:27:47.606Z",
 "revision": 2,
 "_id": "64f8a9df750465004742adbf",
 "pendingAlgoliaPublish": false,
 "createdAt": "2020-09-02T14:39:03.052Z",
 "updatedAt": "2023-06-05T19:11:19.248Z",
 "user": "5b8400d7185d5e00036dcc3b",
 "category": "64f8a9df750465004742ad73",
 "project": "5bda01cad172e200499a20a9",
 "version": "64f8a9df750465004742ae1d",
 "__v": 0,
 "parentDoc": null,
 "isApi": false,
 "id": "64f8a9df750465004742adbf",
 "body_html": "# Data Trigger Overview\n\nAlthough [data contracts](platform-protocol-reference-data-contract) provide much needed constraints on the structure of the data being stored on Dash Platform, there are limits to what they can do. Certain system data contracts may require server-side validation logic to operate effectively. For example, [DPNS](https://dashplatform.readme.io/docs/explanation-dpns) must enforce some rules to ensure names remain DNS compatible. Dash Platform Protocol (DPP) supports this application-specific custom logic using Data Triggers.\n\n# Details\n\nSince all application data is submitted in the form of documents, data triggers are defined in the context of documents. To provide even more granularity, they also incorporate the [document transition action](platform-protocol-reference-document#document-transition-action) so separate triggers can be created for the CREATE, REPLACE, or DELETE actions.\n\nWhen document state transitions are received, DPP checks if there is a trigger associated with the document transition type and action. If there is, it then executes the trigger logic.\n\n**Note:** Successful execution of the trigger logic is necessary for the document to be accepted and applied to the platform state.\n\n## Example\n\nAs an example, DPP contains several data triggers for DPNS as defined in the [data triggers factory](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/get_data_triggers_factory.rs). The `domain` document has added constraints for creation. All DPNS document types have constraints on replacing or deleting:\n\n| Data Contract | Document           | Action(s)                                                                                                                            | Trigger Description                                                                                      |\n| ------------- | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------- |\n| DPNS          | `domain`           | [`CREATE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/lib/dataTrigger/dpnsTriggers/createDomainDataTrigger.js) | Enforces DNS compatibility, validates provided hashes, and restricts top-level domain (TLD) registration |\n| ----          | ----               | ----                                                                                                                                 | ----                                                                                                     |\n| DPNS          | All Document Types | [`REPLACE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/reject_data_trigger.rs)                | Prevents updates to existing documents                                                                   |\n| DPNS          | All Document Types | [`DELETE`](https://github.com/dashpay/platform/blob/v0.24.5/packages/rs-dpp/src/data_trigger/reject_data_trigger.rs)                 | Prevents deletion of existing documents                                                                  |\n\n**DPNS Trigger Constraints**\n\nThe following table details the DPNS constraints applied via data triggers. These constraints are in addition to the ones applied directly by the DPNS data contract.\n\n| Document   | Action    | Constraint                                                                                                  |\n| ---------- | --------- | ----------------------------------------------------------------------------------------------------------- |\n| `domain`   | `CREATE`  | Full domain length \\<= 253 characters                                                                       |\n| `domain`   | `CREATE`  | `normalizedLabel` matches lowercase `label`                                                                 |\n| `domain`   | `CREATE`  | `ownerId` matches `records.dashUniqueIdentityId` or `dashAliasIdentityId` (whichever one is present)        |\n| `domain`   | `CREATE`  | Only creating a top-level domain with an authorized identity                                                |\n| `domain`   | `CREATE`  | Referenced `normalizedParentDomainName` must be an existing parent domain                                   |\n| `domain`   | `CREATE`  | Subdomain registration for non top level domains prevented if `subdomainRules.allowSubdomains` is true      |\n| `domain`   | `CREATE`  | Subdomain registration only allowed by the parent domain owner if `subdomainRules.allowSubdomains` is false |\n| `domain`   | `CREATE`  | Referenced `preorder` document must exist                                                                   |\n| `domain`   | `REPLACE` | Action not allowed                                                                                          |\n| `domain`   | `DELETE`  | Action not allowed                                                                                          |\n| `preorder` | `REPLACE` | Action not allowed                                                                                          |\n| `preorder` | `DELETE`  | Action not allowed                                                                                          |"
}